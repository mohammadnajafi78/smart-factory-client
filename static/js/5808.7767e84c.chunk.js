"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[5808],{2693:(e,l,n)=>{n.d(l,{A:()=>a});n(9950);var i=n(37072),o=n(44414);function a(e){var l=e.label,n=e.value;return(0,o.jsxs)("div",{style:{display:"inline-flex"},children:[(0,o.jsx)(i.A,{style:{color:"#00AAB5"},children:"".concat(l,": ")}),(0,o.jsx)(i.A,{style:{color:"#335D8A"},children:n})]})}},5808:(e,l,n)=>{n.r(l),n.d(l,{default:()=>b});var i=n(89379),o=n(5544),a=n(95537),d=n(14341),t=n(97539),s=n(6445),r=n(29031),c=n(9950),u=n(16673),x=n(46565),p=n(37072),h=n(2693),v=n(41608),m=n(4721),A=n(44414);const b=function(e){(0,u.useHistory)();var l,n,b,j,y,f,g,F,_,C,k,w,W,S,B,R,E,O,I,V=null===e||void 0===e?void 0:e.data,D=null===e||void 0===e?void 0:e.editable,J=(0,c.useState)([]),T=(0,o.A)(J,2),q=T[0],M=T[1],P=(0,c.useState)(null===(l=e.data)||void 0===l||null===(n=l.company)||void 0===n||null===(b=n.location_info)||void 0===b?void 0:b.province),H=(0,o.A)(P,2),z=H[0],G=H[1],K=(0,c.useState)([]),L=(0,o.A)(K,2),N=L[0],Q=L[1],U=(0,c.useState)(null===(j=e.data)||void 0===j||null===(y=j.company)||void 0===y||null===(f=y.location_info)||void 0===f?void 0:f.city),X=(0,o.A)(U,2),Y=X[0],Z=X[1],$=(0,r.dh)().enqueueSnackbar;return(0,c.useEffect)((function(){v.A.get("".concat(m.J,"/api/utils/provinces/?country_id=25")).then((function(e){200===e.status&&M(e.data)})).catch((function(e){417===e.response.status?$(e.response.data.error,{variant:"error"}):$("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,c.useEffect)((function(){null!==z&&v.A.get("".concat(m.J,"/api/utils/cities/?province__id=").concat(z)).then((function(e){200===e.status&&Q(e.data)})).catch((function(e){417===e.response.status?$(e.response.data.error,{variant:"error"}):$("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[z]),(0,A.jsx)(s.l1,{initialValues:{name:null===V||void 0===V||null===(g=V.company)||void 0===g?void 0:g.name,phone:null===V||void 0===V||null===(F=V.company)||void 0===F?void 0:F.phone,email:null===V||void 0===V||null===(_=V.company)||void 0===_?void 0:_.email,website:null===V||void 0===V||null===(C=V.company)||void 0===C?void 0:C.website,national_id:null===V||void 0===V||null===(k=V.company)||void 0===k?void 0:k.national_id,province_name:null===V||void 0===V||null===(w=V.company)||void 0===w||null===(W=w.location_info)||void 0===W?void 0:W.province_name,city_name:null===V||void 0===V||null===(S=V.company)||void 0===S||null===(B=S.location_info)||void 0===B?void 0:B.city_name,postal_code:null===V||void 0===V||null===(R=V.company)||void 0===R||null===(E=R.location_info)||void 0===E?void 0:E.postal_code,address:null===V||void 0===V||null===(O=V.company)||void 0===O||null===(I=O.location_info)||void 0===I?void 0:I.address},onSubmit:function(l,n){n.setErrors;var i=n.setSubmitting;i(!0),v.A.post("".concat(m.J,"/api/utils/companies/company_update/"),{name:l.name,phone:l.phone,email:l.email,website:l.website,national_id:l.national_id,country:25,province:z,city:Y,postal_code:l.postal_code,address:l.address}).then((function(l){200===l.status?(e.getData(),i(!1),e.setEditable(!1)):i(!1)})).catch((function(e){i(!1),417===e.response.status?$(e.response.data.error,{variant:"error"}):$("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:function(e){e.errors;var l=e.handleBlur,n=e.handleChange,o=e.handleSubmit,s=e.isSubmitting,r=(e.touched,e.values),c=e.setFieldValue;return(0,A.jsxs)("form",{noValidate:!0,onSubmit:o,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",gap:"100px",width:"100%",height:"100%"},children:[(0,A.jsxs)(a.A,{children:[!1===D&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u0646\u0627\u0645 \u0634\u0631\u06a9\u062a",value:null===r||void 0===r?void 0:r.name})})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u0646\u0627\u0645 \u0634\u0631\u06a9\u062a"}),(0,A.jsx)(d.A,{id:"name","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0646\u0627\u0645 \u0634\u0631\u06a9\u062a",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:r.name,onChange:n,onBlur:l})]}),!1===D&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u062a\u0644\u0641\u0646",value:null===r||void 0===r?void 0:r.phone})})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u062a\u0644\u0641\u0646"}),(0,A.jsx)(d.A,{id:"phone","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u062a\u0644\u0641\u0646",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:r.phone,onChange:n,onBlur:l})]}),!1===D&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u0627\u06cc\u0645\u06cc\u0644",value:null===r||void 0===r?void 0:r.email})})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u0627\u06cc\u0645\u06cc\u0644"}),(0,A.jsx)(d.A,{id:"email","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0627\u06cc\u0645\u06cc\u0644",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:r.email,onChange:n,onBlur:l})]}),!1===D&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u0648\u0628 \u0633\u0627\u06cc\u062a",value:null===r||void 0===r?void 0:r.website})})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u0648\u0628 \u0633\u0627\u06cc\u062a"}),(0,A.jsx)(d.A,{id:"website","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0648\u0628 \u0633\u0627\u06cc\u062a",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:r.website,onChange:n,onBlur:l})]}),!1===D&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u0634\u0646\u0627\u0633\u0647 \u0645\u0644\u06cc",value:null===r||void 0===r?void 0:r.national_id})})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u0634\u0646\u0627\u0633\u0647 \u0645\u0644\u06cc"}),(0,A.jsx)(d.A,{id:"national_id","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0634\u0646\u0627\u0633\u0647 \u0645\u0644\u06cc",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:r.national_id,onChange:n,onBlur:l})]}),!1===D&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u0627\u0633\u062a\u0627\u0646",value:null===r||void 0===r?void 0:r.province_name})})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u0627\u0633\u062a\u0627\u0646"}),(0,A.jsx)(t.A,{disablePortal:!0,fullWidth:!0,options:q,value:q.filter((function(e){return e.id===z}))[0],renderInput:function(e){return(0,A.jsx)(d.A,(0,i.A)((0,i.A)({},e),{},{placeholder:"\u0627\u0633\u062a\u0627\u0646",fullWidth:!0,id:"province"}))},onChange:function(e,l){l?(c("province",l.id),G(l.id),Z(null)):c("province","")},isOptionEqualToValue:function(e,l){return e.label===l.label},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f",sx:{".MuiOutlinedInput-root":{padding:"5px"}}})]}),!1===D&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u0634\u0647\u0631",value:null===r||void 0===r?void 0:r.city_name})})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u0634\u0647\u0631"}),(0,A.jsx)(t.A,{disablePortal:!0,fullWidth:!0,options:N,value:N.filter((function(e){return e.id===Y}))[0],renderInput:function(e){return(0,A.jsx)(d.A,(0,i.A)((0,i.A)({},e),{},{placeholder:"\u0634\u0647\u0631",fullWidth:!0,id:"city"}))},onChange:function(e,l){l?(c("city",l.id),Z(l.id)):c("city","")},sx:{".MuiOutlinedInput-root":{padding:"5px"}},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})]}),!1===D&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u06a9\u062f \u067e\u0633\u062a\u06cc",value:null===r||void 0===r?void 0:r.postal_code})})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u06a9\u062f \u067e\u0633\u062a\u06cc"}),(0,A.jsx)(d.A,{id:"postal_code","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u06a9\u062f \u067e\u0633\u062a\u06cc",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:r.postal_code,onChange:n,onBlur:l})]}),!1===D&&(0,A.jsx)(a.A,{sx:{mt:1,mb:1},children:(0,A.jsx)(h.A,{label:"\u0622\u062f\u0631\u0633",value:null===r||void 0===r?void 0:r.address})}),!0===D&&(0,A.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,A.jsx)(p.A,{style:{color:"#A7A5A6"},children:"\u0622\u062f\u0631\u0633"}),(0,A.jsx)(d.A,{id:"address","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0622\u062f\u0631\u0633",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:r.address,onChange:n,onBlur:l})]})]}),!0===D&&(0,A.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"space-between",gap:2},children:[(0,A.jsx)(x.A,{disabled:!1,variant:"outlined",children:"\u0644\u063a\u0648"}),(0,A.jsx)(x.A,{disabled:s,type:"submit",loading:s,children:"\u0630\u062e\u06cc\u0631\u0647"})]})]})}})}}}]);