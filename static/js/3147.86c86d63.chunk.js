"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[3147],{13147:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(5544),o=n(9950),i=n(95537),s=n(70821),a=n(41608),l=n(4721),c=n(37072),p=n(46565),d=n(95374),u=n(21333),x=n(16673),f=n(29031),y=n(44414),h=(0,s.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function g(e){var t=(0,o.useState)(),n=(0,r.A)(t,2),s=(n[0],n[1],(0,o.useState)(null)),g=(0,r.A)(s,2),m=g[0],A=g[1],j=(0,x.useHistory)(),v=(h(),(0,o.useState)(!1)),b=(0,r.A)(v,2),w=b[0],O=b[1],k=(0,f.dh)().enqueueSnackbar;return(0,o.useEffect)((function(){a.A.get("".concat(l.J,"/api/orders/payment/get_order_payments/?order_num=").concat(e.location.state.order_num)).then((function(e){200===e.status&&A(e.data)})).catch((function(e){417===e.response.status?k(e.response.data.error,{variant:"error"}):k("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",height:"inherit",gap:"10px"},children:(0,y.jsxs)(i.A,{children:[(0,y.jsxs)(i.A,{sx:{display:"inline-flex"},onClick:function(){j.goBack()},children:[(0,y.jsx)(d.A,{color:"#335D8A",width:"15px"}),(0,y.jsx)(c.A,{style:{color:"#335D8A",fontSize:"14px"},children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]}),null!==m&&(0,y.jsxs)(i.A,{children:[(0,y.jsx)(i.A,{sx:{paddingBottom:"100px"},children:(0,y.jsxs)(i.A,{sx:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,y.jsx)(c.A,{style:{fontSize:"14px"},children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0648\u0627\u0631\u06cc\u0632\u06cc \u0634\u0645\u0627:"}),m.map((function(e,t){return(0,y.jsxs)(i.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",gap:"40px",background:"#E6EBF0",borderRadius:"8px"},children:[(0,y.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},children:[(0,y.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:"0px",gap:"3px",borderRadius:"8px"},children:(0,y.jsxs)(i.A,{sx:{display:"inline-flex"},children:[(0,y.jsx)(c.A,{style:{fontStyle:"normal",fontWeight:700,fontSize:"18px",lineHeight:"28px",textAlign:"right",color:"#00346D",marginBottom:"10px"},children:e.payment_amount}),(0,y.jsx)(c.A,{style:{fontStyle:"normal",fontWeight:400,fontSize:"14px",lineHeight:"20px",textAlign:"right",color:"#6685A7"},children:""})]})}),(0,y.jsx)(c.A,{style:{fontStyle:"normal",fontWeight:400,fontSize:"14px",lineHeight:"20px",textAlign:"right",color:"#335D8A"},children:e.payment_type.label})]}),(0,y.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,y.jsx)(i.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"3px 4px !important",background:"APPROVED"===e.payment_state.name?"#CCEEF0":"INITIAL"===e.payment_state.name?"#FFFFFF":"#FEEEEC",borderRadius:"4px",width:"100px",mb:1},children:(0,y.jsx)(c.A,{style:{color:"APPROVED"===(null===e||void 0===e?void 0:e.payment_state.name)?"#00AAB5":"INITIAL"===e.payment_state.name?"#00346D":"#F14950",fontSize:"12px",textAlign:"center",padding:0},children:null===e||void 0===e?void 0:e.payment_state.label})}),(0,y.jsxs)(p.A,{sx:{display:"inline-flex",color:"#335D8A"},loading:w,onClick:function(){O(!0),a.A.get("".concat(l.J,"/api/orders/payment/get_payment?payment_num=").concat(e.payment_num)).then((function(t){O(!1),200===t.status&&j.push({pathname:"/sale/received/payment/add",state:e})})).catch((function(e){O(!1),417===e.response.status?k(e.response.data.error,{variant:"error"}):k("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:[(0,y.jsx)(c.A,{style:{color:"#335D8A",padding:0,fontSize:"12px"},children:"\u0645\u0634\u0627\u0647\u062f\u0647 \u0648 \u062a\u0627\u06cc\u06cc\u062f"}),(0,y.jsx)(u.A,{style:{marginTop:"2px",color:"#335D8A"}})]})]})]})}))]})}),(0,y.jsxs)(i.A,{sx:{display:"inline-flex",justifyContent:"center",gap:2,position:"fixed",bottom:0,left:0,width:"100%",padding:"10px",backgroundColor:"white"},children:[(0,y.jsx)(p.A,{disabled:!1,variant:"outlined",onClick:function(){j.goBack()},type:"button",children:"\u0644\u063a\u0648"}),(0,y.jsx)(p.A,{disabled:m.filter((function(e){return"INITIAL"===e.payment_state.name})).length>0,loading:w,onClick:function(){O(!0);var t=new FormData;t.append("order_num",e.location.state.order_num),a.A.post("".concat(l.J,"/api/orders/payment/update_order_payment/"),t).then((function(e){O(!1),200===e.status&&j.push("/sale/received")})).catch((function(e){O(!1),417===e.response.status?k(e.response.data.error,{variant:"error"}):k("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u0630\u062e\u06cc\u0631\u0647 \u0627\u0637\u0644\u0627\u0639\u0627\u062a"})]})]})]})})})}},95374:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(9950),o=n(89561),i=n.n(o);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=(0,r.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,i=e.size,l=void 0===i?24:i,c=a(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.createElement("polyline",{points:"12 5 19 12 12 19"}))}));l.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},l.displayName="ArrowRight";const c=l},21333:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(9950),o=n(89561),i=n.n(o);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=(0,r.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,i=e.size,l=void 0===i?24:i,c=a(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),r.createElement("polyline",{points:"15 18 9 12 15 6"}))}));l.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},l.displayName="ChevronLeft";const c=l}}]);