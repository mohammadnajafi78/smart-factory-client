"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[4341],{4341:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r=n(89379),a=n(9950),s=n(14857),o=n(22433),i=n(5544),u=n(95537),p=n(14341),c=n(46565),l=n(4534),d=n(37072),h=n(6445),x=n(97539),j=n(41608),f=n(16673),m=n(4721),A=n(58926),b=n(29031),g=n(44414);const y=function(e){var t=(0,a.useState)(null),n=(0,i.A)(t,2),s=n[0],o=n[1],y=(0,a.useState)(null),q=(0,i.A)(y,2),v=q[0],_=q[1],w=(0,a.useState)(null),C=(0,i.A)(w,2),S=C[0],I=C[1],T=(0,a.useState)(null),L=(0,i.A)(T,2),O=L[0],k=L[1],E=(0,b.dh)().enqueueSnackbar,N=(0,f.useHistory)();return(0,a.useEffect)((function(){j.A.get("".concat(m.J,"/api/project/get_project_actions")).then((function(e){200===e.status&&o(e.data)})).catch((function(e){417===e.response.status?E(e.response.data.error,{variant:"error"}):E("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,a.useEffect)((function(){v&&j.A.post("".concat(m.J,"/api/project/get_project_list/?action=").concat(v.toLowerCase())).then((function(e){200===e.status&&I(e.data)})).catch((function(e){417===e.response.status?E(e.response.data.error,{variant:"error"}):E("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[v]),(0,g.jsxs)(u.A,{sx:{mt:"20px"},children:[(0,g.jsx)(l.A,{style:{marginRight:"10px"},children:"\u062b\u0628\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u062c\u062f\u06cc\u062f"}),(0,g.jsx)(h.l1,{initialValues:{requestTypeName:"",project:""},validationSchema:A.Ik().shape({}),onSubmit:function(e,t){t.setErrors;var n=t.setSubmitting;n(!0),j.A.post("".concat(m.J,"/api/project/add_request/"),{project_num:O,request_type:v}).then((function(e){201===e.status&&("design"===v.toLowerCase()?N.push({pathname:"/project/request/new/design/reqInfo",state:{project_num:O,request_type:v,data:e.data}}):"bom"===v.toLowerCase()?N.push({pathname:"/project/request/new/bom/reqInfo",state:{project_num:O,request_type:v,data:e.data}}):"supervision"===v.toLowerCase()?N.push({pathname:"/project/request/new/supervision/supervisorInfo",state:{project_num:O,request_type:v,data:e.data}}):"warranty"===v.toLowerCase()&&N.push({pathname:"/project/request/new/warranty/reqInfo",state:{project_num:O,request_type:v,data:e.data}}),n(!1))})).catch((function(e){417===e.response.status?E(e.response.data.error,{variant:"error"}):E("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})})),n(!1)},children:function(e){e.errors,e.handleBlur,e.handleChange;var t=e.handleSubmit,n=e.setFieldValue;e.isSubmitting,e.touched,e.values;return(0,g.jsxs)("form",{noValidate:!0,onSubmit:t,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",gap:"159px",position:"absolute",width:"90%",height:"88%",left:"20px",top:"67px"},children:[(0,g.jsxs)(u.A,{children:[(0,g.jsxs)(u.A,{sx:{mt:2},children:[(0,g.jsx)(d.A,{children:"\u0646\u0648\u0639 \u062f\u0631\u062e\u0648\u0627\u0633\u062a"}),s&&(0,g.jsx)(x.A,{disablePortal:!0,fullWidth:!0,options:s,renderInput:function(e){return(0,g.jsx)(p.A,(0,r.A)((0,r.A)({},e),{},{placeholder:"\u0646\u0648\u0639 \u062f\u0631\u062e\u0648\u0627\u0633\u062a",fullWidth:!0,id:"requestType"}))},onChange:function(e,t){t?(n("requestTypeName",t.label),_(t.name)):n("requestTypeName","")},isOptionEqualToValue:function(e,t){return e.label===t.label},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f",sx:{".MuiOutlinedInput-root":{padding:"5px"}}})]}),(0,g.jsxs)(u.A,{sx:{mt:2},children:[(0,g.jsx)(d.A,{children:"\u067e\u0631\u0648\u0698\u0647 \u0645\u0648\u0631\u062f \u0646\u0638\u0631"}),S&&(0,g.jsx)(x.A,{disablePortal:!0,id:"projectList",options:S,renderInput:function(e){return(0,g.jsx)(p.A,(0,r.A)((0,r.A)({},e),{},{placeholder:"\u067e\u0631\u0648\u0698\u0647 \u0645\u0648\u0631\u062f \u0646\u0638\u0631"}))},onChange:function(e,t){t?(n("projectName",t.name),k(t.project_num)):n("projectName","")},getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return e.label===t.label},sx:{".MuiOutlinedInput-root":{padding:"5px"}},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})]})]}),(0,g.jsxs)(u.A,{sx:{display:"inline-flex",justifyContent:"center",gap:2},children:[(0,g.jsx)(c.A,{disabled:!1,variant:"outlined",type:"button",children:"\u0644\u063a\u0648"}),(0,g.jsx)(c.A,{type:"submit",children:"\u062b\u0628\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a"})]})]})}})]})};var q=n(13045),v=n(38986),_=n(60172);const w=function(e){var t=(0,a.useState)(null),n=(0,i.A)(t,2),s=n[0],o=n[1],c=(0,a.useState)(null),l=(0,i.A)(c,2),d=l[0],y=l[1],w=(0,a.useState)(null),C=(0,i.A)(w,2),S=C[0],I=C[1],T=(0,a.useState)(null),L=(0,i.A)(T,2),O=L[0],k=L[1],E=(0,b.dh)().enqueueSnackbar,N=(0,f.useHistory)();return(0,a.useEffect)((function(){j.A.get("".concat(m.J,"/api/project/get_project_actions")).then((function(e){200===e.status&&o(e.data)})).catch((function(e){417===e.response.status?E(e.response.data.error,{variant:"error"}):E("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,a.useEffect)((function(){d&&j.A.post("".concat(m.J,"/api/project/get_project_list/?action=").concat(d.toLowerCase())).then((function(e){200===e.status&&I(e.data)})).catch((function(e){417===e.response.status?E(e.response.data.error,{variant:"error"}):E("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[d]),(0,g.jsxs)(u.A,{sx:{mt:"80px",ml:"120px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,g.jsx)(v.A,{style:{margin:"10px",color:"#335D8A"},children:"\u062b\u0628\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u062c\u062f\u06cc\u062f"}),(0,g.jsx)(u.A,{sx:{background:"white",padding:"20px",height:"380px",borderRadius:"8px",width:"400px"},children:(0,g.jsx)(h.l1,{initialValues:{requestTypeName:"",project:""},validationSchema:A.Ik().shape({}),onSubmit:function(e,t){t.setErrors;var n=t.setSubmitting;n(!0),j.A.post("".concat(m.J,"/api/project/add_request/"),{project_num:O,request_type:d}).then((function(e){201===e.status&&("design"===d.toLowerCase()?N.push({pathname:"/project/request/new/design/reqInfo",state:{data:e.data,project_num:O,request_type:d}}):"bom"===d.toLowerCase()?N.push({pathname:"/project/request/new/bom/reqInfo",state:{data:e.data,project_num:O,request_type:d}}):"supervision"===d.toLowerCase()?N.push({pathname:"/project/request/new/supervision/supervisorInfo",state:{data:e.data,project_num:O,request_type:d}}):"warranty"===d.toLowerCase()&&N.push({pathname:"/project/request/new/warranty/reqInfo",state:{data:e.data,project_num:O,request_type:d}}),n(!1))})).catch((function(e){417===e.response.status?E(e.response.data.error,{variant:"error"}):E("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})})),n(!1)},children:function(e){e.errors,e.handleBlur,e.handleChange;var t=e.handleSubmit,n=e.setFieldValue;e.isSubmitting,e.touched,e.values;return(0,g.jsxs)("form",{noValidate:!0,onSubmit:t,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",height:"300px"},children:[(0,g.jsxs)(u.A,{children:[(0,g.jsxs)(u.A,{sx:{mt:2},children:[(0,g.jsx)(_.A,{children:"\u0646\u0648\u0639 \u062f\u0631\u062e\u0648\u0627\u0633\u062a"}),s&&(0,g.jsx)(x.A,{disablePortal:!0,fullWidth:!0,options:s,renderInput:function(e){return(0,g.jsx)(p.A,(0,r.A)((0,r.A)({},e),{},{placeholder:"\u0646\u0648\u0639 \u062f\u0631\u062e\u0648\u0627\u0633\u062a",fullWidth:!0,id:"requestType"}))},onChange:function(e,t){t?(n("requestTypeName",t.label),y(t.name)):n("requestTypeName","")},isOptionEqualToValue:function(e,t){return e.label===t.label},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f",sx:{".MuiOutlinedInput-root":{padding:"5px"}}})]}),(0,g.jsxs)(u.A,{sx:{mt:2},children:[(0,g.jsx)(_.A,{children:"\u067e\u0631\u0648\u0698\u0647 \u0645\u0648\u0631\u062f \u0646\u0638\u0631"}),S&&(0,g.jsx)(x.A,{disablePortal:!0,id:"projectList",options:S,renderInput:function(e){return(0,g.jsx)(p.A,(0,r.A)((0,r.A)({},e),{},{placeholder:"\u067e\u0631\u0648\u0698\u0647 \u0645\u0648\u0631\u062f \u0646\u0638\u0631"}))},onChange:function(e,t){t?(n("projectName",t.name),k(t.project_num)):n("projectName","")},getOptionLabel:function(e){return e.name},isOptionEqualToValue:function(e,t){return e.label===t.label},sx:{".MuiOutlinedInput-root":{padding:"5px"}},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})]})]}),(0,g.jsxs)(u.A,{sx:{display:"inline-flex",justifyContent:"center",gap:2},children:[(0,g.jsx)(q.A,{disabled:!1,variant:"outlined",type:"button",children:"\u0644\u063a\u0648"}),(0,g.jsx)(q.A,{type:"submit",children:"\u062b\u0628\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a"})]})]})}})})]})};const C=function(e){var t=(0,s.A)(),n=(0,o.A)(t.breakpoints.down("md"));return(0,g.jsx)(g.Fragment,{children:n?(0,g.jsx)(y,(0,r.A)({},e)):(0,g.jsx)(w,(0,r.A)({},e))})}}}]);