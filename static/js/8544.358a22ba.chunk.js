"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[8544],{82669:(e,t,n)=>{n.d(t,{A:()=>r});n(9950);const r=n.p+"static/media/attach.ff9a92d492af27efb56122f15c661d9e.svg"},11131:(e,t,n)=>{n.d(t,{A:()=>r});n(9950);const r=n.p+"static/media/delete.c16b753a6f5712bce41f56c8a50d9186.svg"},6252:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(22413),i=n.n(r);function a(e){return i()(e).locale("en").format("YYYY-MM-DD")}},28544:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var r=n(89379),i=n(5544),a=n(9950),s=n(95537),o=n(97539),l=n(14341),d=n(46483),c=n(67535),p=n(41608),u=n(4721),x=n(37072),h=n(46565),f=n(95374),m=n(16673),A=n(6445),y=n(58926),b=n(32459),g=n(63571),j=n(1314),v=n(34200),w=n(6252),k=n(11131),C=n(82669),S=n(29031),F=n(44414);function O(e){var t=(0,a.useState)(),n=(0,i.A)(t,2),O=(n[0],n[1],(0,a.useState)(null)),_=(0,i.A)(O,2),D=(_[0],_[1],(0,a.useState)([])),R=(0,i.A)(D,2),B=R[0],I=R[1],W=(0,m.useHistory)(),z=(0,S.dh)().enqueueSnackbar,E=e.location.state;e.location.new;return(0,a.useEffect)((function(){p.A.get("".concat(u.J,"/api/orders/payment/get_payment_type/")).then((function(e){200===e.status&&I(e.data)})).catch((function(e){417===e.response.status?z(e.response.data.error,{variant:"error"}):z("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",height:"inherit",gap:"10px"},children:(0,F.jsxs)(s.A,{children:[(0,F.jsxs)(s.A,{sx:{display:"inline-flex"},onClick:function(){W.goBack()},children:[(0,F.jsx)(f.A,{color:"#335D8A",width:"15px"}),(0,F.jsx)(x.A,{style:{color:"#335D8A",fontSize:"14px"},children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]}),(0,F.jsx)(A.l1,{initialValues:{type:"",date:"",number:"",code:"",price:"",file:""},validationSchema:y.Ik().shape({}),onSubmit:function(t,n){n.setErrors;var r=n.setSubmitting,i=n.resetForm;r(!0);var a=new FormData;a.append("order_num",e.location.state.order_num),a.append("payment_type",t.type),a.append("payment_date",(0,w.A)(t.date)),a.append("bill_number",t.number),a.append("track_number",t.code),a.append("payment_amount",t.price),a.append("file",t.file),p.A.post("".concat(u.J,"/api/orders/payment/add_payment/"),a).then((function(e){200===e.status?(r(!1),i(),W.push({pathname:"/sale/send/payment",state:e.data})):r(!1)})).catch((function(e){r(!1),417===e.response.status?z(e.response.data.error,{variant:"error"}):z("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:function(e){var t=e.errors,n=e.handleBlur,i=e.handleChange,a=e.handleSubmit,f=e.isSubmitting,m=e.touched,A=e.values,y=e.setFieldValue;return(0,F.jsxs)("form",{noValidate:!0,onSubmit:a,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",width:"100%",height:"100%"},children:[(0,F.jsxs)(s.A,{sx:{mb:"60px"},children:[(0,F.jsx)(x.A,{children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0648\u0627\u0631\u06cc\u0632 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"}),(0,F.jsxs)(s.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u0646\u062d\u0648\u0647 \u067e\u0631\u062f\u0627\u062e\u062a"}),B.length>0&&(0,F.jsx)(o.A,{disablePortal:!0,fullWidth:!0,options:B,value:B.filter((function(e){return e.name===A.type}))[0],renderInput:function(e){return(0,F.jsx)(l.A,(0,r.A)((0,r.A)({},e),{},{placeholder:"\u0646\u062d\u0648\u0647 \u06cc \u067e\u0631\u062f\u0627\u062e\u062a",fullWidth:!0,id:"type",error:Boolean(m.type&&t.type),helperText:m.type&&t.type}))},getOptionLabel:function(e){return e.label},onChange:function(e,t){y("type",t?t.name:"")},sx:{".MuiOutlinedInput-root":{padding:"5px"}},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})]}),(0,F.jsxs)(s.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u062a\u0627\u0631\u06cc\u062e"}),(0,F.jsx)(b.$,{dateAdapter:j.A,children:(0,F.jsx)(g.l,{id:"date",value:A.date,onChange:function(e){y("date",e)},renderInput:function(e){return(0,F.jsx)(l.A,(0,r.A)((0,r.A)({},e),{},{sx:{background:"#F2F2F2",margin:"3px"},fullWidth:!0,error:Boolean(m.date&&t.date),helperText:m.date&&t.date}))}})})]}),(0,F.jsxs)(s.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u0634\u0645\u0627\u0631\u0647 \u0633\u0646\u062f/\u0686\u06a9"}),(0,F.jsx)(l.A,{id:"number","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0634\u0645\u0627\u0631\u0647 \u0633\u0646\u062f/\u0686\u06a9",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:A.number,onChange:i,onBlur:n})]}),(0,F.jsxs)(s.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u06a9\u062f \u067e\u06cc\u06af\u06cc\u0631\u06cc"}),(0,F.jsx)(l.A,{id:"code","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u06a9\u062f \u067e\u06cc\u06af\u06cc\u0631\u06cc",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:A.code,onChange:i,onBlur:n})]}),(0,F.jsxs)(s.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u0645\u0628\u0644\u063a"}),(0,F.jsx)(l.A,{id:"price","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0645\u0628\u0644\u063a",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:A.price,onChange:i,onBlur:n,InputProps:{endAdornment:(0,F.jsx)(d.A,{position:"end",tabIndex:-1,children:(0,F.jsx)(x.A,{style:{color:"#335D8A",fontSize:"16px",fontWeight:400}})})}})]}),(0,F.jsxs)(s.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u062a\u0635\u0648\u06cc\u0631 \u0641\u06cc\u0634 \u0648\u0627\u0631\u06cc\u0632/\u0686\u06a9"}),A.file?(0,F.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",padding:"20px 10px 5px",gap:"20px",height:"320px",border:"2px dashed #99DDE1",borderRadius:"4px"},children:[(0,F.jsx)("img",{src:URL.createObjectURL(A.file),width:"300px",height:"180px",style:{borderRadius:"8px"}}),(0,F.jsx)(x.A,{style:{color:"#335D8A",fontSize:"11px"},children:A.file.name}),(0,F.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"100%"},children:[(0,F.jsxs)(c.A,{sx:{fontFamily:"IRANSans",fontSize:"12px",fontWeight:400},onClick:function(){y("file","")},children:[(0,F.jsx)("img",{src:k.A,width:"13px",height:"13px"}),"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646"]}),(0,F.jsxs)(c.A,{sx:{fontFamily:"IRANSans",fontSize:"12px",fontWeight:400},component:"label",onChange:function(e){y("file",event.target.files[0])},children:[(0,F.jsx)("img",{src:C.A,width:"13px",height:"20px"}),"\u062a\u063a\u06cc\u06cc\u0631 \u0641\u0627\u06cc\u0644",(0,F.jsx)("input",{type:"file",hidden:!0,multiple:!1})]})]})]}):(0,F.jsxs)(h.A,{disabled:!1,variant:"outlined",component:"label",onChange:function(e){y("file",e.target.files[0])},children:[(0,F.jsx)(v.A,{}),"\u0622\u067e\u0644\u0648\u062f \u0641\u0627\u06cc\u0644",(0,F.jsx)("input",{type:"file",hidden:!0})]})]})]}),(0,F.jsxs)(s.A,{sx:{display:"inline-flex",justifyContent:"space-between",gap:2,width:"100%",position:"fixed",bottom:0,left:0,backgroundColor:"white",padding:"10px"},children:[E.payment_num?(0,F.jsx)(h.A,{disabled:!1,variant:"outlined",onClick:function(){p.A.get("".concat(u.J,"/api/orders/payment/remove_payment?payment_num=").concat(E.payment_num)).then((function(e){200===e.status&&W.goBack()})).catch((function(e){417===e.response.status?z(e.response.data.error,{variant:"error"}):z("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u062d\u0630\u0641"}):(0,F.jsx)(h.A,{disabled:!1,variant:"outlined",onClick:function(){W.goBack()},children:"\u0644\u063a\u0648"}),(0,F.jsx)(h.A,{disabled:f,type:"submit",loading:f,children:"\u0630\u062e\u06cc\u0631\u0647 \u0627\u0637\u0644\u0627\u0639\u0627\u062a "})]})]})}})]})})})}},34200:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(65471),i=n(44414);const a=(0,r.A)((0,i.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile")},95374:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(9950),i=n(89561),a=n.n(i);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=(0,r.forwardRef)((function(e,t){var n=e.color,i=void 0===n?"currentColor":n,a=e.size,l=void 0===a?24:a,d=o(e,["color","size"]);return r.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),r.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),r.createElement("polyline",{points:"12 5 19 12 12 19"}))}));l.propTypes={color:a().string,size:a().oneOfType([a().string,a().number])},l.displayName="ArrowRight";const d=l}}]);