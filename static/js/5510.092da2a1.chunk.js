"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[5510],{2693:(e,i,n)=>{n.d(i,{A:()=>o});n(9950);var t=n(37072),l=n(44414);function o(e){var i=e.label,n=e.value;return(0,l.jsxs)("div",{style:{display:"inline-flex"},children:[(0,l.jsx)(t.A,{style:{color:"#00AAB5"},children:"".concat(i,": ")}),(0,l.jsx)(t.A,{style:{color:"#335D8A"},children:n})]})}},85510:(e,i,n)=>{n.r(i),n.d(i,{default:()=>b});var t=n(89379),l=n(5544),o=n(9950),d=n(95537),r=n(14341),s=n(46565),a=n(37072),c=n(6445),u=n(97539),v=n(41608),p=n(16673),x=n(4721),h=n(58926),A=n(2693),f=n(29031),y=n(44414);const b=function(e){var i,n,b,j,m,_,g,I,S,F,k,C,w,B=null===e||void 0===e?void 0:e.data,W=null===e||void 0===e?void 0:e.editable;console.log("ppp",null===B||void 0===B||null===(i=B.user_location)||void 0===i?void 0:i.province);var D=(0,o.useState)([]),E=(0,l.A)(D,2),O=E[0],T=E[1],V=(0,o.useState)(null===(n=e.data)||void 0===n||null===(b=n.user_location)||void 0===b?void 0:b.province),q=(0,l.A)(V,2),J=q[0],M=q[1],P=(0,o.useState)([]),R=(0,l.A)(P,2),Y=R[0],H=R[1],z=(0,o.useState)(null===(j=e.data)||void 0===j||null===(m=j.user_location)||void 0===m?void 0:m.city),G=(0,l.A)(z,2),K=G[0],L=G[1],N=((0,p.useHistory)(),(0,f.dh)().enqueueSnackbar);return(0,o.useEffect)((function(){v.A.get("".concat(x.J,"/api/utils/provinces/?country_id=25")).then((function(e){200===e.status&&T(e.data)})).catch((function(e){417===e.response.status?N(e.response.data.error,{variant:"error"}):N("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,o.useEffect)((function(){null!==J&&v.A.get("".concat(x.J,"/api/utils/cities/?province__id=").concat(J)).then((function(e){200===e.status&&H(e.data)})).catch((function(e){417===e.response.status?N(e.response.data.error,{variant:"error"}):N("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[J]),(0,y.jsx)(c.l1,{initialValues:{province_name:null===B||void 0===B||null===(_=B.user_location)||void 0===_?void 0:_.province_name,city_name:null===B||void 0===B||null===(g=B.user_location)||void 0===g?void 0:g.city_name,postal_code:null===B||void 0===B||null===(I=B.user_location)||void 0===I?void 0:I.postal_code,address:null===B||void 0===B||null===(S=B.user_location)||void 0===S?void 0:S.address,provinceId:null===(F=e.data)||void 0===F||null===(k=F.user_location)||void 0===k?void 0:k.province,cityId:null===(C=e.data)||void 0===C||null===(w=C.user_location)||void 0===w?void 0:w.city},validationSchema:h.Ik().shape({cityId:h.Yj().required("\u0634\u0647\u0631 \u0646\u0628\u0627\u06cc\u062f \u062e\u0627\u0644\u06cc \u0628\u0627\u0634\u062f"),provinceId:h.Yj().required("\u0627\u0633\u062a\u0627\u0646 \u0646\u0628\u0627\u06cc\u062f \u062e\u0627\u0644\u06cc \u0628\u0627\u0634\u062f")}),onSubmit:function(i,n){n.setErrors;var t,l=n.setSubmitting;l(!0),v.A.patch("".concat(x.J,"/api/utils/locations/").concat(null===B||void 0===B||null===(t=B.user_location)||void 0===t?void 0:t.id,"/"),{country_id:25,province:J,city:K,address:i.address,postal_code:i.postal_code}).then((function(i){200===i.status?(e.getData(),l(!1),e.setEditable(!1)):l(!1)})).catch((function(e){l(!1),417===e.response.status?N(e.response.data.error,{variant:"error"}):N("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:function(e){var i=e.errors,n=e.handleBlur,l=e.handleChange,o=e.handleSubmit,c=e.isSubmitting,v=e.touched,p=e.values,x=e.setFieldValue;return(0,y.jsxs)("form",{noValidate:!0,onSubmit:o,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",gap:"100px",width:"100%",height:"100%"},children:[(0,y.jsxs)(d.A,{children:[!1===W&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.A,{sx:{mt:1,mb:1},children:(0,y.jsx)(A.A,{label:"\u0627\u0633\u062a\u0627\u0646",value:null===p||void 0===p?void 0:p.province_name})})}),!0===W&&(0,y.jsxs)(d.A,{sx:{mt:1,mb:1},children:[(0,y.jsx)(a.A,{style:{color:"#A7A5A6"},children:"\u0627\u0633\u062a\u0627\u0646"}),(0,y.jsx)(u.A,{disablePortal:!0,fullWidth:!0,options:O,value:O.filter((function(e){return e.id===p.provinceId}))[0],renderInput:function(e){return(0,y.jsx)(r.A,(0,t.A)((0,t.A)({},e),{},{placeholder:"\u0627\u0633\u062a\u0627\u0646",fullWidth:!0,id:"province",error:Boolean(v.provinceId&&i.provinceId),helperText:v.provinceId&&i.provinceId}))},onChange:function(e,i){i?(x("provinceId",i.id),M(i.id),L(null)):x("provinceId","")},sx:{".MuiOutlinedInput-root":{padding:"5px"}},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})]}),!1===W&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.A,{sx:{mt:1,mb:1},children:(0,y.jsx)(A.A,{label:"\u0634\u0647\u0631",value:null===p||void 0===p?void 0:p.city_name})})}),!0===W&&(0,y.jsxs)(d.A,{sx:{mt:1,mb:1},children:[(0,y.jsx)(a.A,{style:{color:"#A7A5A6"},children:"\u0634\u0647\u0631"}),(0,y.jsx)(u.A,{disablePortal:!0,fullWidth:!0,options:Y,defaultValue:Y.filter((function(e){return e.id===p.cityId}))[0],renderInput:function(e){return(0,y.jsx)(r.A,(0,t.A)((0,t.A)({},e),{},{placeholder:"\u0634\u0647\u0631",fullWidth:!0,id:"cityId",error:Boolean(v.cityId&&i.cityId),helperText:v.cityId&&i.cityId}))},onChange:function(e,i){i?(x("cityId",i.id),L(i.id)):x("cityId","")},sx:{".MuiOutlinedInput-root":{padding:"5px"}},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})]}),!1===W&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.A,{sx:{mt:1,mb:1},children:(0,y.jsx)(A.A,{label:"\u06a9\u062f \u067e\u0633\u062a\u06cc",value:null===p||void 0===p?void 0:p.postal_code})})}),!0===W&&(0,y.jsxs)(d.A,{sx:{mt:1,mb:1},children:[(0,y.jsx)(a.A,{style:{color:"#A7A5A6"},children:"\u06a9\u062f \u067e\u0633\u062a\u06cc"}),(0,y.jsx)(r.A,{id:"postal_code","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u06a9\u062f \u067e\u0633\u062a\u06cc",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:p.postal_code,onChange:l,onBlur:n})]}),!1===W&&(0,y.jsxs)(d.A,{sx:{mt:1,mb:1},children:[(0,y.jsxs)("div",{style:{display:"inline-flex"},children:[(0,y.jsx)(a.A,{style:{color:"#00AAB5",width:"28%"},children:"\u0622\u062f\u0631\u0633: "}),(0,y.jsx)(a.A,{style:{color:"#335D8A",whiteSpace:"break-spaces"},children:null===p||void 0===p?void 0:p.address})]})," "]}),!0===W&&(0,y.jsxs)(d.A,{sx:{mt:1,mb:1},children:[(0,y.jsx)(a.A,{style:{color:"#A7A5A6"},children:"\u0622\u062f\u0631\u0633"}),(0,y.jsx)(r.A,{id:"address","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0622\u062f\u0631\u0633",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:p.address,onChange:l,onBlur:n})]})]}),W&&(0,y.jsxs)(d.A,{sx:{display:"inline-flex",justifyContent:"space-between",gap:2,width:"100%"},children:[(0,y.jsx)(s.A,{disabled:!1,variant:"outlined",type:"submit",children:"\u0644\u063a\u0648"}),(0,y.jsx)(s.A,{disabled:c,type:"submit",loading:c,children:"\u0630\u062e\u06cc\u0631\u0647"})]})]})}})}}}]);