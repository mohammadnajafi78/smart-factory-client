"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[3737],{82669:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);const i=n.p+"static/media/attach.ff9a92d492af27efb56122f15c661d9e.svg"},11131:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);const i=n.p+"static/media/delete.c16b753a6f5712bce41f56c8a50d9186.svg"},6252:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(22413),s=n.n(i);function r(e){return s()(e).locale("en").format("YYYY-MM-DD")}},73737:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var i=n(89379),s=n(5544),r=n(9950),a=n(95537),l=n(14341),o=n(97539),d=n(67535),c=n(41608),p=n(4721),x=n(37072),u=n(46565),h=n(95374),f=n(16673),A=n(6445),m=n(58926),j=n(32459),g=n(1314),b=n(34200),y=n(6252),v=n(70821),_=n(67999),S=n(11131),w=n(82669),C=n(29031),k=n(44414),D=(0,v.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function F(e){var t=(0,r.useState)(),n=(0,s.A)(t,2),v=(n[0],n[1],(0,r.useState)(null)),F=(0,s.A)(v,2),I=(F[0],F[1],(0,r.useState)([])),R=(0,s.A)(I,2),V=R[0],E=R[1],z=(0,r.useState)(!1),B=(0,s.A)(z,2),L=(B[0],B[1],(0,r.useState)(null)),M=(0,s.A)(L,2),O=(M[0],M[1],(0,f.useHistory)()),W=(e.location.state,D(),(0,C.dh)().enqueueSnackbar);return(0,r.useEffect)((function(){c.A.get("".concat(p.J,"/api/orders/delivery/get_delivery_type/")).then((function(e){200===e.status&&E(e.data)})).catch((function(e){417===e.response.status?W(e.response.data.error,{variant:"error"}):W("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",height:"inherit",gap:"10px"},children:(0,k.jsxs)(a.A,{children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},onClick:function(){O.goBack()},children:[(0,k.jsx)(h.A,{color:"#335D8A",width:"15px"}),(0,k.jsx)(x.A,{style:{color:"#335D8A",fontSize:"14px"},children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]}),(0,k.jsx)(A.l1,{initialValues:{type:"",date:"",comment:"",file:""},validationSchema:m.Ik().shape({}),onSubmit:function(t,n){n.setErrors;var i=n.setSubmitting;i(!0);var s=new FormData;s.append("order_num",e.location.order_num),s.append("order_action","Approve"),s.append("state","INCOMPLETE_DELIVERY"===e.location.state?"Supply_Incomplete":"Delivery"),s.append("sender_date",(0,y.A)(t.date)),s.append("sender_description",t.comment),s.append("sender_delivery_type",t.type),s.append("BL",t.file),c.A.post("".concat(p.J,"/api/orders/update_order_state/"),s).then((function(e){200===e.status?(i(!1),O.push("/sale/received")):i(!1)})).catch((function(e){i(!1),417===e.response.status?W(e.response.data.error,{variant:"error"}):W("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:function(e){var t=e.errors,n=e.handleBlur,s=e.handleChange,r=e.handleSubmit,c=e.isSubmitting,p=e.touched,h=e.values,f=e.setFieldValue;return(0,k.jsxs)("form",{noValidate:!0,onSubmit:r,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",width:"100%",height:"100%"},children:[(0,k.jsxs)(a.A,{sx:{mb:"60px"},children:[(0,k.jsx)(x.A,{children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0631\u0633\u0627\u0644 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"}),(0,k.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,k.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u0632\u0645\u0627\u0646 \u0627\u0631\u0633\u0627\u0644"}),(0,k.jsx)(j.$,{dateAdapter:g.A,children:(0,k.jsx)(_.K,{mask:"____/__/__",value:h.date,onChange:function(e){f("date",e)},renderInput:function(e){return(0,k.jsx)(l.A,(0,i.A)((0,i.A)({},e),{},{sx:{background:"#F2F2F2",width:"100%"},placeholder:"\u0632\u0645\u0627\u0646 \u0627\u0631\u0633\u0627\u0644"}))}})})]}),(0,k.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,k.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u0646\u062d\u0648\u0647 \u06cc \u0627\u0631\u0633\u0627\u0644"}),V.length>0&&(0,k.jsx)(o.A,{disablePortal:!0,fullWidth:!0,options:V,value:V.filter((function(e){return e.name===h.type}))[0],renderInput:function(e){return(0,k.jsx)(l.A,(0,i.A)((0,i.A)({},e),{},{placeholder:"\u0646\u062d\u0648\u0647 \u06cc \u0627\u0631\u0633\u0627\u0644",fullWidth:!0,id:"type",error:Boolean(p.type&&t.type),helperText:p.type&&t.type}))},getOptionLabel:function(e){return e.label},onChange:function(e,t){f("type",t?t.name:"")},sx:{".MuiOutlinedInput-root":{padding:"5px"}},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})]}),(0,k.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,k.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"}),(0,k.jsx)(l.A,{id:"comment","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:h.comment,onChange:s,onBlur:n,multiline:!0,rows:3})]}),(0,k.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,k.jsx)(x.A,{style:{color:"#A7A5A6"},children:"\u0628\u0627\u0631\u0646\u0627\u0645\u0647"}),h.file?(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",padding:"20px 10px 5px",gap:"20px",height:"320px",border:"2px dashed #99DDE1",borderRadius:"4px"},children:[(0,k.jsx)("img",{src:URL.createObjectURL(h.file),width:"300px",height:"180px",style:{borderRadius:"8px"}}),(0,k.jsx)(x.A,{style:{color:"#335D8A",fontSize:"11px"},children:h.file.name}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"100%"},children:[(0,k.jsxs)(d.A,{sx:{fontFamily:"IRANSans",fontSize:"12px",fontWeight:400},onClick:function(){f("file","")},children:[(0,k.jsx)("img",{src:S.A,width:"13px",height:"13px"}),"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646"]}),(0,k.jsxs)(d.A,{sx:{fontFamily:"IRANSans",fontSize:"12px",fontWeight:400},component:"label",onChange:function(e){f("file",event.target.files[0])},children:[(0,k.jsx)("img",{src:w.A,width:"13px",height:"20px"}),"\u062a\u063a\u06cc\u06cc\u0631 \u0641\u0627\u06cc\u0644",(0,k.jsx)("input",{type:"file",hidden:!0,multiple:!1})]})]})]}):(0,k.jsxs)(u.A,{disabled:!1,variant:"outlined",component:"label",onChange:function(e){f("file",e.target.files[0])},children:[(0,k.jsx)(b.A,{}),"\u0622\u067e\u0644\u0648\u062f \u0641\u0627\u06cc\u0644",(0,k.jsx)("input",{type:"file",hidden:!0})]})]})]}),(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"space-between",gap:2,width:"100%",position:"fixed",bottom:0,left:0,background:"white",padding:"10px"},children:[(0,k.jsx)(u.A,{disabled:!1,variant:"outlined",onClick:function(){O.goBack()},children:"\u0644\u063a\u0648"}),(0,k.jsx)(u.A,{disabled:c,type:"submit",loading:c,children:"\u0630\u062e\u06cc\u0631\u0647 \u0627\u0637\u0644\u0627\u0639\u0627\u062a "})]})]})}})]})})})}},34200:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(65471),s=n(44414);const r=(0,i.A)((0,s.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile")}}]);