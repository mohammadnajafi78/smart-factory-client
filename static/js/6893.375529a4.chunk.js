"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[6893],{25358:(e,t,n)=>{n.d(t,{A:()=>s});n(9950);var i=n(95537),o=n(36233),l=n(93999),r=n(12833),a=n(44414);function s(e){var t=e.activeStep,n=e.steps;return(0,a.jsx)(i.A,{sx:{width:"100%"},children:(0,a.jsx)(o.A,{activeStep:t,alternativeLabel:!0,sx:{".MuiStepIcon-root":{color:"#F2F2F2"}},children:n.map((function(e){return(0,a.jsx)(l.A,{children:(0,a.jsx)(r.A,{children:e})},e)}))})})}},95266:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(64467),o=(n(9950),n(59254)),l=n(95537),r=n(61763),a=n(86551),s=n(44414),d=(0,o.Ay)(r.A)((function(e){var t;e.theme;return t={height:10,borderRadius:0,marginTop:"5px"},(0,i.A)(t,"&.".concat(a.A.colorPrimary),{backgroundColor:"#D3D2D2"}),(0,i.A)(t,"& .".concat(a.A.bar),{borderRadius:5,backgroundColor:"#00AAB5"}),t}));function c(e){return(0,s.jsx)(l.A,{sx:{flexGrow:1},children:(0,s.jsx)(d,{variant:"determinate",value:e.percentage})})}},6893:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var i=n(89379),o=n(9950),l=n(14857),r=n(22433),a=n(5544),s=n(95537),d=n(72145),c=n(7233),u=n(81169),p=n(49535),x=n(6445),h=n(16673),g=n(46565),f=n(37072),A=n(4534),v=n(95266),j=n(41608),y=n(4721),m=n(58926),b=n(19984),T=n(29031),S=n(44414);const C=function(e){var t,n,i,l,r,C,w,D,k=(0,o.useState)(null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.design_type?null===e||void 0===e||null===(n=e.location)||void 0===n?void 0:n.design_type.map((function(e){return e.id})):[]),I=(0,a.A)(k,2),E=I[0],M=I[1],W=(0,o.useState)(null!==e&&void 0!==e&&null!==(i=e.location)&&void 0!==i&&null!==(l=i.state)&&void 0!==l&&null!==(r=l.control)&&void 0!==r&&r.name?null===e||void 0===e||null===(C=e.location)||void 0===C||null===(w=C.state)||void 0===w||null===(D=w.control)||void 0===D?void 0:D.name:"MANUAL"),_=(0,a.A)(W,2),R=_[0],z=_[1],F=(0,T.dh)().enqueueSnackbar,B=e.location.state,V=(0,h.useHistory)();return(0,S.jsxs)(s.A,{sx:{mt:"20px"},children:[(0,S.jsx)(A.A,{style:{marginRight:"10px"},children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a"}),(0,S.jsx)(v.A,{percentage:20}),(0,S.jsx)(x.l1,{initialValues:{requestTypeName:"",project:""},validationSchema:m.Ik().shape({}),onSubmit:function(e,t){t.setErrors;var n=t.setSubmitting;n(!0),j.A.post("".concat(y.J,"/api/project/design/update_design/"),{ref_num:B.data.ref_num,design_type:E,control:R}).then((function(e){200===e.status&&(V.push({pathname:"/project/request/new/design/techInfo",state:e.data}),n(!1))})).catch((function(e){417===e.response.status?F(e.response.data.error,{variant:"error"}):F("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})})),n(!1)},children:function(e){e.errors,e.handleBlur,e.handleChange;var t=e.handleSubmit;e.setFieldValue,e.isSubmitting,e.touched,e.values;return(0,S.jsxs)("form",{noValidate:!0,onSubmit:t,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",gap:"159px",position:"absolute",width:"90%",height:"88%",left:"20px",top:"67px"},children:[(0,S.jsxs)(s.A,{children:[(0,S.jsx)(s.A,{sx:{mt:2},children:(0,S.jsx)(f.A,{children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0632\u06cc\u0631 \u0631\u0627 \u062c\u0647\u062a \u062b\u0628\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"})}),(0,S.jsxs)(s.A,{sx:{mt:2},children:[(0,S.jsx)(A.A,{style:{fontSize:"14px",fontWeight:500,color:"#00346D"},children:"\u0646\u0648\u0639 \u0637\u0631\u0627\u062d\u06cc"}),(0,S.jsx)(b.A,{url:"/api/project/get_project_type",designType:E,setDesignType:M})]}),(0,S.jsxs)(s.A,{sx:{mt:2},children:[(0,S.jsx)(A.A,{style:{fontSize:"14px",fontWeight:500,color:"#00346D"},children:"\u0646\u0648\u0639 \u0633\u06cc\u0633\u062a\u0645 \u06a9\u0646\u062a\u0631\u0644"}),(0,S.jsx)(d.A,{sx:{width:"95%"},children:(0,S.jsxs)(p.A,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",value:R,onChange:function(e){z(e.target.value)},children:[(0,S.jsx)(c.A,{value:"THERMOSTATIC",control:(0,S.jsx)(u.A,{sx:{padding:"4px"}}),label:"\u062a\u0631\u0645\u0648\u0633\u062a\u0627\u062a\u06cc\u06a9",sx:{backgroundColor:"#E6EBF0",padding:"4px",margin:"4px 0px",borderRadius:"4px",".MuiTypography-root":{color:"#00346D",fontSize:"14px",fontWeight:500}}}),(0,S.jsx)(c.A,{value:"MANUAL",control:(0,S.jsx)(u.A,{sx:{padding:"4px"}}),label:"\u062f\u0633\u062a\u06cc",sx:{backgroundColor:"#E6EBF0",padding:"4px",margin:"4px 0px",borderRadius:"4px",".MuiTypography-root":{color:"#00346D",fontSize:"14px",fontWeight:500}}})]})})]})]}),(0,S.jsx)(s.A,{sx:{display:"inline-flex",justifyContent:"center",gap:2},children:(0,S.jsx)(g.A,{type:"submit",children:"\u0628\u0639\u062f\u06cc"})})]})}})]})};var w=n(13045),D=n(60172),k=n(38986),I=n(25358);const E=function(e){var t,n,i,l,r,g,f,A,v,C,E,M,W,_,R=(0,o.useState)(null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(n=t.state)&&void 0!==n&&null!==(i=n.data)&&void 0!==i&&i.design_type?null===e||void 0===e||null===(l=e.location)||void 0===l||null===(r=l.state)||void 0===r||null===(g=r.data)||void 0===g?void 0:g.design_type.map((function(e){return e.id})):[]),z=(0,a.A)(R,2),F=z[0],B=z[1],V=(0,o.useState)(null!==e&&void 0!==e&&null!==(f=e.location)&&void 0!==f&&null!==(A=f.state)&&void 0!==A&&null!==(v=A.data)&&void 0!==v&&null!==(C=v.control)&&void 0!==C&&C.name?null===e||void 0===e||null===(E=e.location)||void 0===E||null===(M=E.state)||void 0===M||null===(W=M.data)||void 0===W||null===(_=W.control)||void 0===_?void 0:_.name:"MANUAL"),q=(0,a.A)(V,2),L=q[0],N=q[1],H=(0,T.dh)().enqueueSnackbar,G=e.location.state;console.log("state",G);var U=(0,h.useHistory)();return(0,S.jsxs)(s.A,{sx:{mt:"80px",ml:"120px",width:"400px",background:"white",padding:"20px",height:"650px",borderRadius:"8px"},children:[(0,S.jsx)(k.A,{style:{marginRight:"10px"},children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a"}),(0,S.jsx)(I.A,{activeStep:0,steps:["","","","",""]}),(0,S.jsx)(x.l1,{initialValues:{requestTypeName:"",project:""},validationSchema:m.Ik().shape({}),onSubmit:function(e,t){t.setErrors;var n=t.setSubmitting;n(!0),console.log("state2",G),j.A.post("".concat(y.J,"/api/project/design/update_design/"),{ref_num:G.data.ref_num,design_type:F,control:L}).then((function(e){200===e.status&&(U.push({pathname:"/project/request/new/design/techInfo",state:e.data}),n(!1))})).catch((function(e){417===e.response.status?H(e.response.data.error,{variant:"error"}):H("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})})),n(!1)},children:function(e){e.errors,e.handleBlur,e.handleChange;var t=e.handleSubmit;e.setFieldValue,e.isSubmitting,e.touched,e.values;return(0,S.jsxs)("form",{noValidate:!0,onSubmit:t,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",height:"540px",gap:"20px",overflow:"auto"},children:[(0,S.jsxs)(s.A,{children:[(0,S.jsx)(s.A,{sx:{mt:2},children:(0,S.jsx)(D.A,{children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0632\u06cc\u0631 \u0631\u0627 \u062c\u0647\u062a \u062b\u0628\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"})}),(0,S.jsxs)(s.A,{sx:{mt:2},children:[(0,S.jsx)(k.A,{style:{fontSize:"14px",fontWeight:500,color:"#00346D"},children:"\u0646\u0648\u0639 \u0637\u0631\u0627\u062d\u06cc"}),(0,S.jsx)(b.A,{url:"/api/project/get_project_type",designType:F,setDesignType:B})]}),(0,S.jsxs)(s.A,{sx:{mt:2},children:[(0,S.jsx)(k.A,{style:{fontSize:"14px",fontWeight:500,color:"#00346D"},children:"\u0646\u0648\u0639 \u0633\u06cc\u0633\u062a\u0645 \u06a9\u0646\u062a\u0631\u0644"}),(0,S.jsx)(d.A,{sx:{width:"95%"},children:(0,S.jsxs)(p.A,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",value:L,onChange:function(e){N(e.target.value)},children:[(0,S.jsx)(c.A,{value:"THERMOSTATIC",control:(0,S.jsx)(u.A,{sx:{padding:"4px"}}),label:"\u062a\u0631\u0645\u0648\u0633\u062a\u0627\u062a\u06cc\u06a9",sx:{backgroundColor:"#E6EBF0",padding:"4px",margin:"4px 0px",borderRadius:"4px",".MuiTypography-root":{color:"#00346D",fontSize:"14px",fontWeight:500}}}),(0,S.jsx)(c.A,{value:"MANUAL",control:(0,S.jsx)(u.A,{sx:{padding:"4px"}}),label:"\u062f\u0633\u062a\u06cc",sx:{backgroundColor:"#E6EBF0",padding:"4px",margin:"4px 0px",borderRadius:"4px",".MuiTypography-root":{color:"#00346D",fontSize:"14px",fontWeight:500}}})]})})]})]}),(0,S.jsx)(s.A,{sx:{display:"inline-flex",justifyContent:"center",gap:2,width:"95%"},children:(0,S.jsx)(w.A,{type:"submit",children:"\u0628\u0639\u062f\u06cc"})})]})}})]})};const M=function(e){var t=(0,l.A)(),n=(0,r.A)(t.breakpoints.down("md"));return(0,S.jsx)(S.Fragment,{children:n?(0,S.jsx)(C,(0,i.A)({},e)):(0,S.jsx)(E,(0,i.A)({},e))})}},19984:(e,t,n)=>{n.d(t,{A:()=>C});var i=n(5544),o=n(89379),l=n(60436),r=n(80045),a=n(64467),s=n(9950),d=n(59254),c=n(95537),u=n(15473),p=n(57619),x=n(225),h=n(87233),g=n(51496),f=n(85970),A=n(47644),v=n(41608),j=n(4721),y=n(29031),m=n(44414),b=["bgColor","color","labelIcon","labelInfo","labelText","isChild","id","setDesignType","designType","haveChild"],T=(0,d.Ay)(p.A)((function(e){var t,n=e.theme;return t={color:n.palette.text.secondary},(0,a.A)(t,"& .".concat(x.A.content),(0,a.A)({color:n.palette.text.secondary,backgroundColor:"#E6EBF0",padding:"4px",margin:"4px 0px",borderRadius:"4px",paddingRight:n.spacing(1),fontWeight:n.typography.fontWeightMedium,"&.MuiTreeItem-content":{flexDirection:"row-reverse"},"&.Mui-expanded":{fontWeight:n.typography.fontWeightRegular},"&:hover":{backgroundColor:n.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"var(--tree-view-bg-color, ".concat(n.palette.action.selected,")"),color:"var(--tree-view-color)"}},"& .".concat(x.A.label),{fontWeight:"inherit",color:"inherit"})),(0,a.A)(t,"& .".concat(x.A.group),(0,a.A)({marginLeft:0},"& .".concat(x.A.content),{paddingLeft:n.spacing(2)})),t}));function S(e){var t,n,i=e.bgColor,s=e.color,d=e.labelIcon,u=(e.labelInfo,e.labelText),p=e.isChild,x=e.id,f=(e.setDesignType,e.designType,e.haveChild),A=(0,r.A)(e,b);return(0,m.jsx)(T,(0,o.A)({label:(0,m.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",p:.5,pr:0},children:[(0,m.jsx)(c.A,{component:d,color:"inherit",sx:{mr:1}}),p||!f?(0,m.jsxs)(c.A,{sx:{display:"inline-flex",alignItems:"center",gap:1},children:[(0,m.jsx)(g.A,{size:"small",sx:{padding:"2px",margin:"0px 6px",color:"#99AEC5",width:"12px",fontSize:"14px"},checked:e.designType.filter((function(e){return e===x})).length>0,onClick:function(){e.designType.filter((function(e){return e===x})).length<=0?e.setDesignType([].concat((0,l.A)(e.designType),[x])):e.setDesignType(e.designType.filter((function(e){return e!==x})))}}),(0,m.jsx)(h.A,{variant:"body2",sx:(t={fontWeight:"inherit",flexGrow:1,fontSize:"13px"},(0,a.A)(t,"fontWeight",300),(0,a.A)(t,"color","#00346D"),t),children:u})]}):(0,m.jsx)(h.A,{variant:"body2",sx:(n={fontWeight:"inherit",flexGrow:1,fontSize:"14px"},(0,a.A)(n,"fontWeight",500),(0,a.A)(n,"color","#00346D"),(0,a.A)(n,"lineHeight","25px"),n),children:u})]}),style:{"--tree-view-color":s,"--tree-view-bg-color":i}},A))}function C(e){var t=(0,s.useState)(null),n=(0,i.A)(t,2),o=n[0],l=n[1],r=(0,y.dh)().enqueueSnackbar;return(0,s.useEffect)((function(){e.setDesignType([]),v.A.get("".concat(j.J)+e.url).then((function(e){200===e.status&&l(e.data)})).catch((function(e){417===e.response.status?r(e.response.data.error,{variant:"error"}):r("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,m.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,m.jsx)(c.A,{sx:{display:"inline-flex",alignItems:"center",width:"100%",justifyContent:"space-between"}}),(0,m.jsx)(u.A,{"aria-label":"gmail",defaultCollapseIcon:(0,m.jsx)(A.A,{}),defaultExpandIcon:(0,m.jsx)(f.A,{}),defaultEndIcon:(0,m.jsx)("div",{style:{width:24}}),sx:{flexGrow:1,width:"100%",overflowY:"auto",paddingRight:"15px"},multiSelect:!0,children:o&&o.map((function(t,n){return(0,m.jsx)("div",{children:(0,m.jsx)(S,{nodeId:n,labelText:null===t||void 0===t?void 0:t.name,haveChild:t.child.length>0,id:t.id,designType:e.designType,setDesignType:e.setDesignType,children:null===t||void 0===t?void 0:t.child.map((function(t,n){return(0,m.jsx)(S,{nodeId:t.id+n+1e3,labelText:null===t||void 0===t?void 0:t.name,id:t.id,isChild:!0,designType:e.designType,setDesignType:e.setDesignType})}))})},n)}))})]})}}}]);