"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[7827],{68894:(e,i,l)=>{l.d(i,{A:()=>r});l(9950);const r=l.p+"static/media/id_card.bfc13129a97ba58a50dd626da6d3131c.svg"},2693:(e,i,l)=>{l.d(i,{A:()=>n});l(9950);var r=l(37072),a=l(44414);function n(e){var i=e.label,l=e.value;return(0,a.jsxs)("div",{style:{display:"inline-flex"},children:[(0,a.jsx)(r.A,{style:{color:"#00AAB5"},children:"".concat(i,": ")}),(0,a.jsx)(r.A,{style:{color:"#335D8A"},children:l})]})}},6252:(e,i,l)=>{l.d(i,{A:()=>n});var r=l(22413),a=l.n(r);function n(e){return a()(e).locale("en").format("YYYY-MM-DD")}},67827:(e,i,l)=>{l.r(i),l.d(i,{default:()=>k});var r=l(89379),a=l(5544),n=l(9950),t=l(95537),d=l(14341),o=l(46565),s=l(37072),c=l(6445),u=l(16673),x=l(82310),p=l(41608),h=l(4721),m=l(32459),b=l(63571),j=l(1314),_=l(22466),A=l(68894),v=l(6252),f=l(58926),g=l(2693),y=l(29031),F=l(44414);const k=function(e){var i,l,k=(0,u.useHistory)(),B=null===e||void 0===e?void 0:e.data,C=null===e||void 0===e?void 0:e.editable,D=(0,n.useState)([]),T=(0,a.A)(D,2),w=(T[0],T[1],(0,y.dh)().enqueueSnackbar);return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(c.l1,{initialValues:{name:null===B||void 0===B?void 0:B.first_name,family:null===B||void 0===B?void 0:B.last_name,email:null===B||void 0===B?void 0:B.email,national_id:null===B||void 0===B?void 0:B.national_id,birth_date:null===B||void 0===B?void 0:B.birth_date,user_type_list:null===B||void 0===B?void 0:B.user_type_list,supplier_data:null===B||void 0===B?void 0:B.supplier_data,introducer_data:null===B||void 0===B?void 0:B.introducer_data,job_certificate_id:null===B||void 0===B?void 0:B.job_certificate_id,job_certificate:null===B||void 0===B?void 0:B.job_certificate,id_card:null===B||void 0===B?void 0:B.id_card,introducer:null===B||void 0===B||null===(i=B.introducer_data)||void 0===i?void 0:i.user_id,supplier:null===B||void 0===B||null===(l=B.supplier_data)||void 0===l?void 0:l.user_id},validationSchema:f.Ik().shape({email:f.Yj().email("\u0639\u0628\u0627\u0631\u062a \u0648\u0627\u0631\u062f \u0634\u062f\u0647 \u0628\u0627\u06cc\u062f \u0628\u0647 \u0641\u0631\u0645\u062a \u0627\u06cc\u0645\u06cc\u0644 \u0628\u0627\u0634\u062f")}),onSubmit:function(i,l){l.setErrors;var r=l.setSubmitting,a=l.setFieldError,n=new FormData;null!=i.name&&n.append("first_name",i.name),null!=i.family&&n.append("last_name",i.family),null!=i.email&&n.append("email",i.email),null!=i.national_id&&n.append("national_id",i.national_id),null!=i.birth_date&&n.append("birth_date",(0,v.A)(i.birth_date)),null!=i.job_certificate_id&&n.append("job_certificate_id",i.job_certificate_id),null!=i.job_certificate&&n.append("job_certificate",i.job_certificate),null!==i.supplier&&n.append("supplier",i.supplier),null!==i.introducer&&n.append("introducer",i.introducer),null!=i.id_card&&n.append("id_card",i.id_card),r(!0),p.A.post("".concat(h.J,"/api/users/update_user/"),n).then((function(i){200===i.status?(e.getData(),r(!1),e.setEditable(!1)):r(!1)})).catch((function(e){417===e.response.status?(e.response.data.map((function(e){a(e.field,e.error)})),r(!1),w(e.response.data.error,{variant:"error"})):w("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:function(e){var i,l=e.errors,a=e.handleBlur,n=e.handleChange,c=e.handleSubmit,u=e.isSubmitting,p=e.touched,h=e.values,v=e.setFieldValue;return(0,F.jsxs)("form",{noValidate:!0,onSubmit:c,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",gap:"100px",width:"100%",height:"100%"},children:[(0,F.jsxs)(t.A,{sx:{mb:6},children:[!0===C&&(0,F.jsxs)(t.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(s.A,{style:{color:"#A7A5A6"},children:"\u0646\u0627\u0645"}),(0,F.jsx)(d.A,{id:"name","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0646\u0627\u0645",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"6px 3px"},value:h.name,onChange:n,onBlur:a,error:Boolean(p.name&&l.name),helperText:p.name&&l.name})]}),!0===C&&(0,F.jsxs)(t.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(s.A,{style:{color:"#A7A5A6"},children:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc"}),(0,F.jsx)(d.A,{id:"family","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"6px 3px"},value:h.family,onChange:n,onBlur:a,error:Boolean(p.family&&l.family),helperText:p.family&&l.family})]}),!1===C&&(0,F.jsx)(t.A,{sx:{mt:1,mb:1},children:(0,F.jsx)(g.A,{label:"\u0627\u06cc\u0645\u06cc\u0644",value:null===h||void 0===h?void 0:h.email})}),!0===C&&(0,F.jsxs)(t.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(s.A,{style:{color:"#A7A5A6"},children:"\u0627\u06cc\u0645\u06cc\u0644"}),(0,F.jsx)(d.A,{id:"email","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0627\u06cc\u0645\u06cc\u0644",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"6px 3px"},value:h.email,onChange:n,onBlur:a,error:Boolean(p.email&&l.email),helperText:p.email&&l.email})]}),!1===C&&(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(t.A,{sx:{mt:1,mb:1},children:(0,F.jsx)(g.A,{label:"\u06a9\u062f \u0645\u0644\u06cc",value:null===h||void 0===h?void 0:h.national_id})})}),!0===C&&(0,F.jsxs)(t.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(s.A,{style:{color:"#A7A5A6"},children:"\u06a9\u062f \u0645\u0644\u06cc"}),(0,F.jsx)(d.A,{id:"national_id","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u06a9\u062f \u0645\u0644\u06cc",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"6px 3px"},value:h.national_id,onChange:n,onBlur:a,error:Boolean(p.national_id&&l.national_id),helperText:p.national_id&&l.national_id})]}),!1===C&&(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(t.A,{sx:{mt:1,mb:1},children:(0,F.jsx)(g.A,{label:"\u062a\u0627\u0631\u06cc\u062e \u062a\u0648\u0644\u062f",value:h.birth_date&&(0,x.A)(h.birth_date)})})}),!0===C&&(0,F.jsxs)(t.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(s.A,{style:{color:"#A7A5A6"},children:"\u062a\u0627\u0631\u06cc\u062e \u062a\u0648\u0644\u062f"}),(0,F.jsx)(m.$,{dateAdapter:j.A,children:(0,F.jsx)(b.l,{id:"birth_date",value:h.birth_date,onChange:function(e){v("birth_date",e)},renderInput:function(e){return(0,F.jsx)(d.A,(0,r.A)((0,r.A)({},e),{},{sx:{background:"#F2F2F2",margin:"3px"},fullWidth:!0,error:Boolean(p.birth_date&&l.birth_date),helperText:p.birth_date&&l.birth_date}))}})})]}),!1===C&&(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(t.A,{sx:{mt:1,mb:1},children:(0,F.jsxs)("div",{style:{display:"inline-flex"},children:[(0,F.jsx)(s.A,{style:{color:"#00AAB5",width:"28%"},children:"\u0641\u0639\u0627\u0644\u06cc\u062a: "}),(0,F.jsx)(s.A,{style:{color:"#335D8A",whiteSpace:"break-spaces"},children:null===h||void 0===h||null===(i=h.user_type_list)||void 0===i?void 0:i.map((function(e){return e.translate})).toString()})]})})}),!1===C&&(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(t.A,{sx:{mt:1,mb:1},children:(0,F.jsx)(g.A,{label:"\u062a\u0627\u0645\u06cc\u0646 \u06a9\u0646\u0646\u062f\u0647",value:null!==h&&void 0!==h&&h.supplier_data?(null===h||void 0===h?void 0:h.supplier_data.first_name)+" "+(null===h||void 0===h?void 0:h.supplier_data.last_name):""})})}),null===h.supplier_data&&!0===C&&(0,F.jsxs)(t.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(s.A,{style:{color:"#A7A5A6"},children:"\u062a\u0627\u0645\u06cc\u0646 \u06a9\u0646\u0646\u062f\u0647"}),(0,F.jsx)(d.A,{id:"supplier","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u062a\u0627\u0645\u06cc\u0646 \u06a9\u0646\u0646\u062f\u0647",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px"},value:h.supplier,onChange:n,onBlur:a,error:Boolean(p.supplier&&l.supplier),helperText:p.supplier&&l.supplier})]}),!1===C&&(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(t.A,{sx:{mt:1,mb:1},children:(0,F.jsx)(g.A,{label:"\u0645\u0639\u0631\u0641",value:null!==h&&void 0!==h&&h.introducer_data?(null===h||void 0===h?void 0:h.introducer_data.first_name)+" "+(null===h||void 0===h?void 0:h.introducer_data.last_name):""})})}),null===h.introducer_data&&!0===C&&(0,F.jsxs)(t.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(s.A,{style:{color:"#A7A5A6"},children:"\u0645\u0639\u0631\u0641"}),(0,F.jsx)(d.A,{id:"introducer","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0645\u0639\u0631\u0641",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px"},value:h.introducer,onChange:n,onBlur:a,error:Boolean(p.introducer&&l.introducer),helperText:p.introducer&&l.introducer})]}),!1===C&&(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(t.A,{sx:{mt:1,mb:1},children:(0,F.jsx)(g.A,{label:"\u0634\u0646\u0627\u0633\u0647 \u0645\u062f\u0631\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a",value:null===h||void 0===h?void 0:h.job_certificate_id})})}),!0===C&&(0,F.jsxs)(t.A,{sx:{mt:1,mb:1},children:[(0,F.jsx)(s.A,{style:{color:"#A7A5A6"},children:"\u0634\u0646\u0627\u0633\u0647 \u0645\u062f\u0631\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a"}),(0,F.jsx)(d.A,{id:"job_certificate_id","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u0634\u0646\u0627\u0633\u0647 \u0645\u062f\u0631\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"6px 3px"},value:h.job_certificate_id,onChange:n,onBlur:a,error:Boolean(p.job_certificate_id&&l.job_certificate_id),helperText:p.job_certificate_id&&l.job_certificate_id})]}),!1===C&&(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(t.A,{sx:{mt:1,mb:1,padding:"16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",borderRadius:"8px",background:"#DDF5F6"},children:[(0,F.jsx)(s.A,{style:{color:"#00346D"},children:"\u06a9\u0627\u0631\u062a \u0645\u0644\u06cc"}),(0,F.jsx)("img",{src:null===h||void 0===h?void 0:h.id_card,width:"100%"})]})}),!0===C&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(_.A,{style:{marginTop:"20px",backgroundColor:"#DDF5F6",color:"#00AAB5"},component:"label",onChange:function(e){v("id_card",e.target.files[0])},children:[(0,F.jsx)("img",{src:A.A}),"\u06a9\u0627\u0631\u062a \u0645\u0644\u06cc",(0,F.jsx)("input",{type:"file",hidden:!0,multiple:!1})]}),p.id_card&&l.id_card&&(0,F.jsx)(ErrorMessage,{name:"id_card",children:function(e){return(0,F.jsx)("div",{style:{color:"red",textAlign:"right",marginTop:"5px"},children:e})}})]}),!1===C&&(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(t.A,{sx:{mt:1,mb:1,padding:"16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",borderRadius:"8px",background:"#DDF5F6"},children:[(0,F.jsx)(s.A,{style:{color:"#00346D"},children:"\u0645\u062f\u0631\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a"}),(0,F.jsx)("img",{src:null===h||void 0===h?void 0:h.job_certificate,width:"100%"})]})}),!0===C&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(_.A,{style:{marginTop:"20px",backgroundColor:"#DDF5F6",color:"#00AAB5"},component:"label",onChange:function(e){v("job_certificate",e.target.files[0])},children:[(0,F.jsx)("img",{src:A.A}),"\u0645\u062f\u0631\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a",(0,F.jsx)("input",{type:"file",hidden:!0,multiple:!1})]}),p.job_certificate&&l.job_certificate&&(0,F.jsx)(ErrorMessage,{name:"job_certificate",children:function(e){return(0,F.jsx)("div",{style:{color:"red",textAlign:"right",marginTop:"5px"},children:e})}})]})]}),C&&(0,F.jsxs)(t.A,{sx:{display:"inline-flex",justifyContent:"space-between",gap:2,width:"100%"},children:[(0,F.jsx)(o.A,{disabled:!1,variant:"outlined",onClick:function(){return k.push({pathname:"/profile/detail",state:{data:B}})},children:"\u0644\u063a\u0648"}),(0,F.jsx)(o.A,{disabled:u,type:"submit",loading:u,children:"\u0630\u062e\u06cc\u0631\u0647"})]})]})}})})}}}]);