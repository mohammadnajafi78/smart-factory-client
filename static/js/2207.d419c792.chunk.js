"use strict";(self.webpackChunkbts=self.webpackChunkbts||[]).push([[2207],{67293:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);const i=n.p+"static/media/close.c8d69135c64f5f15f0143f070eca1856.svg"},56823:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);const i=n.p+"static/media/domain.8e9f309dff756775ad8c8cb018c32695.svg"},28423:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);const i=n.p+"static/media/done.a4efbfb59bb0cd31bb65ccc6780b2e23.svg"},23353:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);const i=n.p+"static/media/upload.8253858f7da368e338b06236df25c3ab.svg"},65005:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);const i=n.p+"static/media/local_shipping.a60c117b902490798a3e06f886ea71c4.svg"},58484:(e,t,n)=>{n.d(t,{A:()=>i});n(9950);const i=n.p+"static/media/person.34a9b582540969c80f6683ccd72c0408.svg"},82207:(e,t,n)=>{n.r(t),n.d(t,{default:()=>he});var i=n(89379),s=n(9950),r=n(14857),l=n(22433),o=n(5544),a=n(95537),d=n(70821),x=n(64467),c=n(67535),p=n(74745),u=n(18001),h=n(14341),f=n(60625),g=n(41608),A=n(4721),m=n(60172),y=n(51085),j=n(13045),b=n(21333),_=n(16673),w=n(82310),C=n(37072),v=n(46565),D=n(6878),S=n(29031),k=n(44414);function I(e){var t=e.data,n=(0,s.useState)(t),i=(0,o.A)(n,2),r=i[0],l=i[1],d=(0,S.dh)().enqueueSnackbar;return(0,s.useEffect)((function(){"INCOMPLETE_DELIVERY"===t.current_state.name&&g.A.get("".concat(A.J,"/api/management/order/get_incomplete_delivery?order_num=").concat(t.order_num)).then((function(e){200===e.status&&l(e.data)})).catch((function(e){417===e.response.status?d(e.response.data.error,{variant:"error"}):d("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,k.jsxs)(a.A,{style:{position:"relative"},children:[r&&(0,k.jsxs)(a.A,{children:[(0,k.jsx)(a.A,{children:r.products.map((function(e,t){return(0,k.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsx)("img",{src:e.product_detail.type_detail.images[0].url,width:"36px",height:"36px"}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",marginBottom:"15px"},children:[(0,k.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)(C.A,{style:{color:"#00346D",fontSize:"12px",fontWeight:400},children:e.product_type.name_translate.item_fa}),(0,k.jsx)(C.A,{style:{color:"#6685A7",fontSize:"12px",fontWeight:200,direction:"ltr"},children:"(".concat(e.product_detail.size,")")})]}),(0,k.jsx)(C.A,{style:{color:"#00346D",fontSize:"14px",fontWeight:400},children:"".concat(e.price," ")})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)(C.A,{style:{color:"#00346D",fontSize:"14px",fontWeight:400},children:e.package_quantity}),(0,k.jsx)(C.A,{style:{color:"#00AAB5",fontSize:"14px",fontWeight:300},children:"x"}),(0,k.jsx)(C.A,{style:{color:"#6685A7",fontSize:"14px",fontWeight:300},children:"SINGULAR"===e.package_type?e.product_detail.singular_package_detail.translate_detail.item_fa:"SMALL"===e.package_type?e.product_detail.small_plural_package_detail.translate_detail.item_fa:e.product_detail.large_plural_package_detail.translate_detail.item_fa})]}),(0,k.jsx)(C.A,{style:{color:"#335D8A",fontSize:"14px",fontWeight:400},children:"".concat(e.total_price," ")})]})]})]})}))}),(0,k.jsx)(p.A,{}),"INCOMPLETE_DELIVERY"!==t.current_state.name&&(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",mt:2},children:[(0,k.jsx)(C.A,{style:{color:"#335D8A",fontSize:"14px",fontWeight:400},children:"\u0645\u062c\u0645\u0648\u0639"}),(0,k.jsx)(C.A,{style:{color:"#335D8A",fontSize:"16px",fontWeight:700},children:"".concat(r.final_price," ")})]})]}),(0,k.jsx)("a",{href:null===t||void 0===t?void 0:t.files.filter((function(e){return"PI"===e.subject}))[0].url,download:!0,target:"_blank",style:{textDecoration:"none",width:"100%"},children:(0,k.jsxs)(v.A,{style:{color:"#00AAB5",backgroundColor:"#DDF5F6",position:"relative",bottom:0,marginTop:"30px"},children:[(0,k.jsx)(D.A,{}),"\u062f\u0627\u0646\u0644\u0648\u062f \u0641\u0627\u06cc\u0644 \u062f\u0631\u062e\u0648\u0627\u0633\u062a"]})})]})}var E=n(21689),F=n(65005),z=n(58484),R=n(56823),W=(0,d.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function L(e){var t,n,i,r,l,d,C=e.data,v=W(),D=(0,s.useState)(!1),L=(0,o.A)(D,2),B=L[0],P=L[1],H=(0,s.useState)(!1),N=(0,o.A)(H,2),O=N[0],T=N[1],J=(0,s.useState)(null),V=(0,o.A)(J,2),M=V[0],U=V[1],Y=(0,s.useState)(null),q=(0,o.A)(Y,2),G=q[0],K=q[1],$=(0,s.useState)(!1),Q=(0,o.A)($,2),X=Q[0],Z=Q[1],ee=(0,_.useHistory)(),te=JSON.parse(localStorage.getItem("user")).user_id,ne=(0,S.dh)().enqueueSnackbar;return(0,k.jsxs)(k.Fragment,{children:["WAITING_FOR_PAYMENT_APPROVE"===C.current_state.name&&(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"20px 20px 14px",gap:"10px",background:"#E6EBF0"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)("img",{src:E.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D"},children:"\u0633\u0641\u0627\u0631\u0634 \u062f\u0647\u0646\u062f\u0647 \u0645\u0628\u0644\u063a ".concat(C.final_price,"  \u0631\u0627 \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646 \u0633\u0641\u0627\u0631\u0634 \u067e\u0631\u062f\u0627\u062e\u062a \u06a9\u0631\u062f\u0647 \u0627\u0633\u062a")})]}),(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%",gap:"6px"},children:(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",height:"32px",background:"#335D8A",borderRadius:"4px","&:hover":{background:"#00346D",color:"white"}},onClick:function(){ee.push({pathname:"/management/sale/received/payment",state:C})},children:[(0,k.jsx)(m.A,{style:{color:"white",padding:0},children:"\u062a\u0627\u06cc\u06cc\u062f \u067e\u0631\u062f\u0627\u062e\u062a"}),(0,k.jsx)(b.A,{color:"white"})]})})]}),"PAYMENT_APPROVED"===C.current_state.name&&"SALE_OFFICE"!==C.supply_by&&(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"20px 20px 14px",gap:"10px",background:"#E6EBF0"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)("img",{src:F.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D"},children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0631\u0633\u0627\u0644 \u0631\u0627 \u0648\u0627\u0631\u062f \u0648 \u0628\u0627\u0631\u0646\u0627\u0645\u0647 \u0631\u0627 \u0636\u0645\u06cc\u0645\u0647 \u06a9\u0646\u06cc\u062f:"})]}),(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%",gap:"6px"},children:(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",height:"32px",background:"#335D8A",borderRadius:"4px","&:hover":{background:"#00346D",color:"white"}},onClick:function(){C.user_type_info.filter((function(e){return"Representer"===e.user_type})).length>=0?T(!0):ee.push({pathname:"/management/sale/received/delivery",order_num:C.order_num,state:C.current_state.name})},children:[(0,k.jsx)(m.A,{style:{color:"white",padding:0},children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0631\u0633\u0627\u0644"}),(0,k.jsx)(b.A,{color:"white"})]})})]}),"INCOMPLETE_DELIVERY"===C.current_state.name&&(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"20px 20px 14px",gap:"10px",background:"#E6EBF0"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)("img",{src:F.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D",marginBottom:2},children:"\u0644\u06cc\u0633\u062a \u0646\u0627\u0642\u0635\u06cc \u0647\u0627\u06cc \u0633\u0641\u0627\u0631\u0634 \u062f\u0631 \u0632\u06cc\u0631 \u0622\u0648\u0631\u062f\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a\u060c \u0648\u0636\u0639\u06cc\u062a \u0633\u0641\u0627\u0631\u0634 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f:"})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%",gap:"6px"},children:[(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",height:"32px",borderRadius:"4px",border:"1px solid #F14950"},onClick:function(){P(!0)},children:[(0,k.jsx)("img",{src:y.A}),(0,k.jsx)(m.A,{style:{color:"#F14950",padding:0},children:"\u0631\u062f \u0646\u0627\u0642\u0635\u06cc"})]}),(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",height:"32px",background:"#335D8A",borderRadius:"4px","&:hover":{background:"#00346D",color:"white"}},onClick:function(){ee.push({pathname:"/management/sale/received/delivery",order_num:C.order_num,state:C.current_state.name})},children:[(0,k.jsx)(m.A,{style:{color:"white",padding:0},children:"\u062a\u0627\u06cc\u06cc\u062f \u0646\u0627\u0642\u0635\u06cc"}),(0,k.jsx)(b.A,{color:"white"})]})]})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"20px",justifyContent:"space-between",height:"inherit",backgroundColor:"white"},children:[(0,k.jsxs)(a.A,{children:[(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"},children:[(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"10px 15px",gap:"10px",width:"75px",height:"84px",background:"#F4F4F4",borderRadius:"8px"},children:(0,k.jsx)("img",{src:null===C||void 0===C||null===(t=C.supplier_info)||void 0===t?void 0:t.user_profile_image,style:{width:"44px"}})}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"0px",gap:"12px",width:"100%",height:"70px"},children:[(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"0px",gap:"8px",width:"100%",height:"25px"},children:[(0,k.jsx)(m.A,{style:{fontWeight:500,fontSize:"16px",color:"#00346D",lineHeight:"17px"},children:(null===C||void 0===C||null===(n=C.supplier_info)||void 0===n?void 0:n.first_name)+" "+(null===C||void 0===C||null===(i=C.supplier_info)||void 0===i?void 0:i.last_name)}),(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"3px 4px !important",background:"#CCEEF0",borderRadius:"4px",color:"#00AAB5"},children:(0,k.jsx)(m.A,{style:{color:"#00AAB5",fontSize:"12px",textAlign:"center"},children:null===C||void 0===C||null===(r=C.current_state)||void 0===r?void 0:r.label})})]}),(0,k.jsx)(a.A,{sx:(l={display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",padding:"0px",gap:"4px",color:"#335D8A",width:"100%"},(0,x.A)(l,"padding","3px 6px"),(0,x.A)(l,"borderRadius","4px"),l),children:(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"12px",color:"#335D8A",lineHeight:"16px"},children:"\u062b\u0628\u062a: ".concat((0,w.A)(null===C||void 0===C?void 0:C.create_date))})}),"CANCELED"===C.current_state.name&&(0,k.jsx)(a.A,{sx:(d={display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",padding:"0px",gap:"4px",color:"#335D8A",width:"100%"},(0,x.A)(d,"padding","3px 6px"),(0,x.A)(d,"borderRadius","4px"),d),children:(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"12px",color:"#335D8A",lineHeight:"16px"},children:"\u0639\u0644\u062a \u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f: ".concat(null===C||void 0===C?void 0:C.flow_action.comment)})})]})]}),(0,k.jsx)(p.A,{sx:{m:2}}),(0,k.jsx)(I,{data:C})]}),C.flow_info.state_user===te&&"SUBMIT"===C.current_state.name&&(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"center",gap:2,position:"fixed",bottom:0,left:0,width:"100%",padding:"10px"},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",onClick:function(){P(!0)},type:"button",children:"\u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f \u0633\u0641\u0627\u0631\u0634"}),(0,k.jsx)(j.A,{onClick:function(){return ee.push({pathname:"/management/sale/received/confirm",state:C})},children:"\u062a\u0627\u06cc\u06cc\u062f \u0633\u0641\u0627\u0631\u0634"})]})]}),(0,k.jsx)(u.Ay,{anchor:"bottom",open:B,onClose:function(){return P(!1)},classes:{paper:v.paper},children:(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",gap:"10px",margin:"20px 0px",borderRadius:"8px"},children:[(0,k.jsx)(a.A,{children:(0,k.jsxs)(a.A,{sx:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,k.jsx)(m.A,{style:{fontSize:"14px"},children:"\u0639\u0644\u062a \u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f \u0633\u0641\u0627\u0631\u0634 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"}),(0,k.jsxs)(a.A,{sx:{mt:1,width:"100%"},children:[(0,k.jsx)(m.A,{style:{color:"#A7A5A6"},children:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"}),(0,k.jsx)(h.A,{id:"name","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"...\u0628\u0646\u0648\u06cc\u0633\u06cc\u062f",rows:4,multiline:!0,sx:{backgroundColor:"white",borderRadius:"4px",margin:"3px 3px"},value:G,onChange:function(e){return K(e.target.value)}})]})]})}),(0,k.jsx)(p.A,{}),(0,k.jsx)(a.A,{sx:{display:"flex",width:"100%",justifyContent:"flex-end"},children:(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",gap:2},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",style:{width:"150px"},onClick:function(){P(!1)},type:"button",children:"\u0644\u063a\u0648"}),(0,k.jsx)(j.A,{style:{width:"150px"},disabled:null==G,loading:X,onClick:function(){Z(!0),g.A.post("".concat(A.J,"/api/management/order/update_order_state/"),{order_num:C.order_num,order_action:"Reject",comment:G,state:"INCOMPLETE_DELIVERY"===C.current_state.name?"Reject_Incomplete":""}).then((function(e){Z(!1),200===e.status&&ee.push("/management/sale/received")})).catch((function(e){Z(!1),417===e.response.status?ne(e.response.data.error,{variant:"error"}):ne("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u062b\u0628\u062a"})]})})]})}),(0,k.jsx)(u.Ay,{anchor:"bottom",open:O,onClose:function(){return T(!1)},classes:{paper:v.paper},children:(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",gap:"10px",margin:"20px 0px",borderRadius:"8px"},children:[(0,k.jsx)(a.A,{children:(0,k.jsxs)(a.A,{sx:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,k.jsx)(m.A,{style:{fontSize:"14px"},children:"\u0627\u0631\u0633\u0627\u0644 \u0633\u0641\u0627\u0631\u0634 \u062a\u0648\u0633\u0637"}),(0,k.jsxs)(f.A,{fullWidth:!0,orientation:"vertical","aria-label":"vertical contained button group",variant:"contained",sx:{gap:2,boxShadow:"none"},id:"input",children:[(0,k.jsxs)(c.A,{sx:{backgroundColor:"#E6EBF0",border:"1px solid #99AEC5",borderRadius:"4px !important",padding:"12px",height:"48px",fontStyle:"normal",fontWeight:400,fontSize:"16px",lineHeight:"24px",color:"#00346D",fontFamily:"IRANSans","&:hover":{color:"#231F20 !important",backgroundColor:"#DFF2F2 !important",fontWeight:600,fontSize:"16px"}},onClick:function(){U("SUPPLIER")},children:[(0,k.jsx)("img",{src:z.A}),"\u062e\u0648\u062f\u0645"]}),(0,k.jsxs)(c.A,{sx:{backgroundColor:"#E6EBF0",border:"1px solid #99AEC5",borderRadius:"4px !important",padding:"12px",height:"48px",fontStyle:"normal",fontWeight:400,fontSize:"16px",lineHeight:"24px",color:"#00346D",fontFamily:"IRANSans","&:hover":{color:"#231F20 !important",backgroundColor:"#DFF2F2 !important",fontWeight:600,fontSize:"16px"}},onClick:function(){U("SALE_OFFICE")},children:[(0,k.jsx)("img",{src:R.A}),"\u062f\u0641\u062a\u0631 \u0641\u0631\u0648\u0634"]})]})]})}),(0,k.jsx)(p.A,{}),(0,k.jsx)(a.A,{sx:{display:"flex",width:"100%",justifyContent:"flex-end"},children:(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",gap:2},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",style:{width:"150px"},onClick:function(){T(!1)},type:"button",children:"\u0644\u063a\u0648"}),(0,k.jsx)(j.A,{style:{width:"150px"},disabled:null==M,loading:X,onClick:function(){Z(!0),g.A.post("".concat(A.J,"/api/management/order/set_supplier/"),{order_num:C.order_num,supply_by:M}).then((function(e){Z(!1),200===e.status&&("SUPPLIER"===M?ee.push({pathname:"/management/sale/received/delivery",order_num:C.order_num,state:C.current_state.name}):ee.push("/management/sale/received"))})).catch((function(e){Z(!1),417===e.response.status?ne(e.response.data.error,{variant:"error"}):ne("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u062b\u0628\u062a"})]})})]})})]})}(0,d.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function B(e){var t=e.location.state,n=(0,s.useState)(e.location.pathname.split("/")[4]),r=(0,o.A)(n,2),l=r[0],d=r[1];return(0,s.useEffect)((function(){d(l)}),[]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"60px 0px",justifyContent:"space-between",height:"inherit",backgroundColor:"white"},children:(0,k.jsx)(L,(0,i.A)((0,i.A)({},e),{},{data:t}))})})}var P=n(4139),H=n(54493),N=n(12116),O=n(4534),T=n(24232);function J(e){var t=e.data,n=e.incomplete,i=(0,s.useState)(),r=(0,o.A)(i,2),l=r[0],d=r[1],x=(0,S.dh)().enqueueSnackbar;return(0,s.useEffect)((function(){!0===n?g.A.get("".concat(A.J,"/api/management/order/get_incomplete_delivery?order_num=").concat(t.order_num)).then((function(e){200===e.status&&d(e.data)})).catch((function(e){417===e.response.status?x(e.response.data.error,{variant:"error"}):x("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})})):d(t)}),[]),(0,k.jsx)(a.A,{style:{position:"relative"},children:l&&(0,k.jsxs)(a.A,{sx:{mt:!0===n?"20px":"0px"},children:[!0!==n&&(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,k.jsx)(O.A,{style:{color:"#231F20",fontSize:"18px",marginBottom:"20px"},children:"\u0644\u06cc\u0633\u062a \u0633\u0641\u0627\u0631\u0634\u0627\u062a"}),t&&(0,k.jsx)(T.A,{data:null===t||void 0===t?void 0:t.files})]}),(0,k.jsx)(a.A,{children:l.products.map((function(e,t){return(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",marginBottom:"15px"},children:[(0,k.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)(C.A,{style:{color:"#00346D",fontSize:"12px",fontWeight:400},children:e.product_type.name_translate.item_fa}),(0,k.jsx)(C.A,{style:{color:"#6685A7",fontSize:"12px",fontWeight:200,direction:"ltr"},children:"(".concat(e.product_detail.size,")")})]}),(0,k.jsx)(C.A,{style:{color:"#00346D",fontSize:"14px",fontWeight:400},children:"".concat(e.price," ")})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)(C.A,{style:{color:"#00346D",fontSize:"14px",fontWeight:400},children:e.package_quantity}),(0,k.jsx)(C.A,{style:{color:"#00AAB5",fontSize:"14px",fontWeight:300},children:"x"}),(0,k.jsx)(C.A,{style:{color:"#6685A7",fontSize:"14px",fontWeight:300},children:"SINGULAR"===e.package_type?e.product_detail.singular_package_detail.translate_detail.item_fa:"SMALL"===e.package_type?e.product_detail.small_plural_package_detail.translate_detail.item_fa:e.product_detail.large_plural_package_detail.translate_detail.item_fa})]}),(0,k.jsx)(C.A,{style:{color:"#335D8A",fontSize:"14px",fontWeight:400},children:"".concat(e.total_price," ")})]})]})}))}),!0!==n&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.A,{}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",mt:2},children:[(0,k.jsx)(C.A,{style:{color:"#335D8A",fontSize:"14px",fontWeight:400},children:"\u0645\u062c\u0645\u0648\u0639"}),(0,k.jsx)(C.A,{style:{color:"#335D8A",fontSize:"16px",fontWeight:700},children:"".concat(l.final_price," ")})]})]})]})})}var V=n(67293),M=n(28423),U=n(82878),Y=n(95374),q=n(23353),G=n(11131),K=n(82669);(0,d.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function $(e){var t=e.PiTag,n=(0,s.useState)(),i=(0,o.A)(n,2),r=i[0],l=i[1],d=(0,s.useState)(null),x=(0,o.A)(d,2),u=x[0],f=x[1],y=(0,_.useHistory)(),b=(0,s.useState)(!1),w=(0,o.A)(b,2),C=w[0],v=w[1],D=(0,S.dh)().enqueueSnackbar;return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",gap:"10px",background:"#E6EBF0",height:"50vh",overflow:"auto"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},onClick:function(){e.setAcceptConfirm(!1)},children:[(0,k.jsx)(Y.A,{color:"#335D8A",width:"15px"}),(0,k.jsx)(m.A,{style:{color:"#335D8A",fontSize:"14px"},children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]}),(0,k.jsx)(a.A,{children:(0,k.jsxs)(a.A,{sx:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,k.jsx)(m.A,{style:{fontSize:"14px"},children:"\u067e\u06cc\u0634\u200c\u0641\u0627\u06a9\u062a\u0648\u0631 \u0633\u0641\u0627\u0631\u0634 \u062f\u0631\u06cc\u0627\u0641\u062a\u06cc \u062e\u0648\u062f \u0631\u0627 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u06a9\u0646\u06cc\u062f:"}),r?(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",padding:"20px 0px 5px",gap:"20px",height:"320px",border:"2px dashed #99DDE1",borderRadius:"4px"},children:[(0,k.jsx)("img",{src:URL.createObjectURL(r),width:"300px",height:"180px",style:{borderRadius:"8px"}}),(0,k.jsx)(m.A,{style:{color:"#335D8A"},children:r.name}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"100%"},children:[(0,k.jsxs)(c.A,{sx:{fontFamily:"IRANSans",fontSize:"16px",fontWeight:400},onClick:function(){l(null)},children:[(0,k.jsx)("img",{src:G.A,width:"13px",height:"13px"}),"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646"]}),(0,k.jsxs)(c.A,{sx:{fontFamily:"IRANSans",fontSize:"16px",fontWeight:400},component:"label",onChange:function(e){l(e.target.files[0])},children:[(0,k.jsx)("img",{src:K.A,width:"13px",height:"20px"}),"\u062a\u063a\u06cc\u06cc\u0631 \u0641\u0627\u06cc\u0644",(0,k.jsx)("input",{type:"file",hidden:!0,multiple:!1})]})]})]}):(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"40px 0px",gap:"30px",height:"150px",border:"2px dashed #99DDE1",borderRadius:"4px",color:"#4F4C4D",fontFamily:"IRANSans",fontWeight:400,fontSize:"16px"},component:"label",onChange:function(e){console.log("file",e.target.files[0]),l(e.target.files[0])},children:[(0,k.jsx)("img",{src:q.A,with:"33px",height:"28px"}),"\u0627\u0646\u062a\u062e\u0627\u0628 \u0641\u0627\u06cc\u0644",(0,k.jsx)("input",{type:"file",hidden:!0,multiple:!1})]}),(0,k.jsxs)(a.A,{sx:{mt:1,width:"100%"},children:[(0,k.jsx)(m.A,{style:{color:"#A7A5A6"},children:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"}),(0,k.jsx)(h.A,{id:"name","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"...\u0628\u0646\u0648\u06cc\u0633\u06cc\u062f",rows:2,multiline:!0,sx:{backgroundColor:"white",borderRadius:"4px",margin:"3px 3px"},value:u,onChange:function(e){return f(e.target.value)}})]})]})}),(0,k.jsx)(p.A,{}),(0,k.jsx)(a.A,{sx:{display:"flex",width:"100%",justifyContent:"flex-end"},children:(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",gap:2},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",onClick:function(){e.setSteps(0)},style:{width:"150px"},type:"button",children:"\u0644\u063a\u0648"}),(0,k.jsx)(j.A,{style:{width:"150px"},loading:C,onClick:function(){v(!0);var n=new FormData;n.append("order_num",e.data.order_num),n.append("order_action","Approve"),n.append("state",t),n.append("comment",u),n.append("PI"===t?"INVOICE":"AGENT_INVOICE",r),g.A.post("".concat(A.J,"/api/management/order/update_order_state/"),n).then((function(e){v(!1),200===e.status&&y.push("/management/sale/received")})).catch((function(e){v(!1),417===e.response.status?D(e.response.data.error,{variant:"error"}):D("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u062b\u0628\u062a \u067e\u06cc\u0634 \u0641\u0627\u06a9\u062a\u0648\u0631"})]})})]})})}var Q=(0,d.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function X(e){var t=(0,s.useState)(),n=(0,o.A)(t,2),i=(n[0],n[1],(0,s.useState)(null)),r=(0,o.A)(i,2),l=r[0],d=r[1],x=(0,s.useState)(!1),c=(0,o.A)(x,2),p=c[0],u=c[1],h=(0,_.useHistory)(),f=(Q(),(0,S.dh)().enqueueSnackbar);return(0,s.useEffect)((function(){g.A.get("".concat(A.J,"/api/management/order/payment/get_order_payments/?order_num=").concat(e.data.order_num)).then((function(e){200===e.status&&d(e.data)})).catch((function(e){417===e.response.status?f(e.response.data.error,{variant:"error"}):f("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"0px 20px",justifyContent:"space-between",height:"43vh",gap:"10px",width:"100%",overflow:"auto"},children:(0,k.jsxs)(a.A,{children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},onClick:function(){h.goBack()},children:[(0,k.jsx)(Y.A,{color:"#335D8A",width:"15px"}),(0,k.jsx)(m.A,{style:{color:"#335D8A",fontSize:"14px"},children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]}),null!==l&&(0,k.jsxs)(a.A,{children:[(0,k.jsx)(a.A,{sx:{paddingBottom:"100px"},children:(0,k.jsxs)(a.A,{sx:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,k.jsx)(m.A,{style:{fontSize:"14px"},children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0648\u0627\u0631\u06cc\u0632\u06cc \u0634\u0645\u0627:"}),l.map((function(t,n){return(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",gap:"20px",background:"white",borderRadius:"8px"},children:[(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},children:[(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:"0px",gap:"3px",borderRadius:"8px"},children:(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)(m.A,{style:{fontStyle:"normal",fontWeight:700,fontSize:"18px",lineHeight:"28px",textAlign:"right",color:"#00346D",marginBottom:"10px"},children:t.payment_amount}),(0,k.jsx)(m.A,{style:{fontStyle:"normal",fontWeight:400,fontSize:"14px",lineHeight:"20px",textAlign:"right",color:"#6685A7"},children:""})]})}),(0,k.jsx)(m.A,{style:{fontStyle:"normal",fontWeight:400,fontSize:"14px",lineHeight:"20px",textAlign:"right",color:"#335D8A"},children:t.payment_type.label})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"3px 4px !important",background:"APPROVED"===t.payment_state.name?"#CCEEF0":"INITIAL"===t.payment_state.name?"#FFFFFF":"#FEEEEC",borderRadius:"4px",width:"100px",mb:1},children:(0,k.jsx)(m.A,{style:{color:"APPROVED"===(null===t||void 0===t?void 0:t.payment_state.name)?"#00AAB5":"INITIAL"===t.payment_state.name?"#00346D":"#F14950",fontSize:"12px",textAlign:"center",padding:0},children:null===t||void 0===t?void 0:t.payment_state.label})}),(0,k.jsxs)(a.A,{sx:{display:"inline-flex",color:"#335D8A"},onClick:function(){g.A.get("".concat(A.J,"/api/management/order/payment/get_payment?payment_num=").concat(t.payment_num)).then((function(n){200===n.status&&(e.setPayment(!1),e.setAddPayment(!0),e.setSelected(t))})).catch((function(e){417===e.response.status?f(e.response.data.error,{variant:"error"}):f("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:[(0,k.jsx)(m.A,{style:{color:"#335D8A",padding:0,fontSize:"12px",cursor:"pointer"},children:"\u0645\u0634\u0627\u0647\u062f\u0647 \u0648 \u062a\u0627\u06cc\u06cc\u062f"}),(0,k.jsx)(b.A,{style:{marginTop:"2px",color:"#335D8A"}})]})]})]})}))]})}),(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",gap:2,width:"100%",padding:"10px"},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",onClick:function(){h.goBack()},type:"button",style:{width:"150px"},children:"\u0644\u063a\u0648"}),(0,k.jsx)(j.A,{style:{width:"150px"},disabled:l.filter((function(e){return"INITIAL"===e.payment_state.name})).length>0,loading:p,onClick:function(){u(!0);var t=new FormData;t.append("order_num",e.data.order_num),g.A.post("".concat(A.J,"/api/management/order/payment/update_order_payment/"),t).then((function(e){u(!1),200===e.status&&h.push("/management/sale/received")})).catch((function(e){u(!1),417===e.response.status?f(e.response.data.error,{variant:"error"}):f("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u0630\u062e\u06cc\u0631\u0647 \u0627\u0637\u0644\u0627\u0639\u0627\u062a"})]})]})]})})})}var Z=(0,d.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function ee(e){var t,n=(0,s.useState)(),i=(0,o.A)(n,2),r=(i[0],i[1],(0,s.useState)(null)),l=(0,o.A)(r,2),d=(l[0],l[1],(0,s.useState)([])),x=(0,o.A)(d,2),c=(x[0],x[1]),u=(0,s.useState)(!1),f=(0,o.A)(u,2),y=f[0],b=f[1],C=(0,s.useState)(null),v=(0,o.A)(C,2),I=v[0],E=v[1],F=(0,s.useState)(!1),z=(0,o.A)(F,2),R=z[0],W=z[1],L=((0,_.useHistory)(),e.selected),B=(Z(),(0,S.dh)().enqueueSnackbar);return(0,s.useEffect)((function(){g.A.get("".concat(A.J,"/api/management/order/payment/get_payment_type/")).then((function(e){200===e.status&&c(e.data)})).catch((function(e){417===e.response.status?B(e.response.data.error,{variant:"error"}):B("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"45vh",overflow:"auto",gap:"10px",width:"100%"},children:(0,k.jsxs)(a.A,{children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},onClick:function(){e.setPayment(!0),e.setAddPayment(!1)},children:[(0,k.jsx)(Y.A,{color:"#335D8A",width:"15px"}),(0,k.jsx)(m.A,{style:{color:"#335D8A",fontSize:"12px",cursor:"pointer"},children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]}),(0,k.jsxs)(a.A,{children:["INITIAL"===L.payment_state.name&&(0,k.jsx)(m.A,{children:"\u0622\u06cc\u0627 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0648\u0627\u0631\u06cc\u0632\u06cc \u0632\u06cc\u0631 \u0645\u0648\u0631\u062f \u062a\u0627\u06cc\u06cc\u062f \u0645\u06cc \u0628\u0627\u0634\u062f\u061f"}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:"0px 12px",gap:"12px",mt:"30px"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)(m.A,{style:{color:"#00346D",fontWeight:500,fontSize:"16px"},children:L.payment_amount}),(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"10px"}})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-end",padding:"0px",gap:"11px",width:"100%"},children:[(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"0px",gap:"6px",width:"100%"},children:[(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"12px"},children:"\u0646\u062d\u0648\u0647 \u067e\u0631\u062f\u0627\u062e\u062a"}),(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"12px"},children:L.payment_type.label})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"0px",gap:"6px",width:"100%"},children:[(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"12px"},children:"\u0632\u0645\u0627\u0646 \u067e\u0631\u062f\u0627\u062e\u062a"}),(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"12px"},children:(0,w.A)(L.payment_date)})]})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"0px",gap:"6px",width:"100%"},children:[(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"12px"},children:"\u0634\u0645\u0627\u0631\u0647 \u0633\u0646\u062f/\u0686\u06a9"}),(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"12px"},children:L.bill_number})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"0px",gap:"6px",width:"100%"},children:[(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"12px"},children:"\u06a9\u062f \u067e\u06cc\u06af\u06cc\u0631\u06cc"}),(0,k.jsx)(m.A,{style:{color:"#6685A7",fontWeight:400,fontSize:"12px"},children:L.track_number})]}),L.file&&(0,k.jsx)("a",{href:null===L||void 0===L||null===(t=L.file)||void 0===t?void 0:t.url,download:!0,style:{textDecoration:"none",width:"100%"},children:(0,k.jsxs)(j.A,{variant:"contained",style:{background:"#DDF5F6",border:"1px solid #00AAB5",color:"#00AAB5",width:"100%"},children:[(0,k.jsx)(D.A,{style:{marginLeft:"3px"}}),"\u062f\u0627\u0646\u0644\u0648\u062f \u0641\u06cc\u0634 \u0648\u0627\u0631\u06cc\u0632\u06cc"]})})]})]}),(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",gap:2,width:"100%",padding:"10px",mt:2},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",onClick:function(){b(!0)},style:{width:"150px"},children:"\u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f"}),(0,k.jsx)(j.A,{style:{width:"150px"},loading:R,onClick:function(){W(!0),g.A.post("".concat(A.J,"/api/management/order/payment/update_payment_status/"),{payment_num:L.payment_num,action:"APPROVED"}).then((function(t){W(!1),200===t.status&&(e.setPayment(!0),e.setAddPayment(!1))})).catch((function(e){W(!1),417===e.response.status?B(e.response.data.error,{variant:"error"}):B("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u062a\u0627\u06cc\u06cc\u062f"})]})]})}),(0,k.jsx)(U.A,{open:y,handleClose:function(){return b(!1)},title:"\u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f",content:(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",gap:"10px",borderRadius:"8px"},children:[(0,k.jsx)(a.A,{children:(0,k.jsxs)(a.A,{sx:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,k.jsx)(m.A,{style:{fontSize:"12px"},children:"\u0639\u0644\u062a \u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f \u0648\u0627\u0631\u06cc\u0632 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"}),(0,k.jsxs)(a.A,{sx:{mt:1,width:"100%"},children:[(0,k.jsx)(m.A,{style:{color:"#A7A5A6",width:"105px"},children:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"}),(0,k.jsx)(h.A,{id:"name","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"...\u0628\u0646\u0648\u06cc\u0633\u06cc\u062f",rows:4,multiline:!0,sx:{backgroundColor:"white",borderRadius:"4px",margin:"3px 3px"},value:I,onChange:function(e){return E(e.target.value)}})]})]})}),(0,k.jsx)(p.A,{}),(0,k.jsx)(a.A,{sx:{display:"flex",width:"100%",justifyContent:"flex-end"},children:(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",gap:2},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",style:{width:"150px"},onClick:function(){b(!1)},type:"button",children:"\u0644\u063a\u0648"}),(0,k.jsx)(j.A,{style:{width:"150px"},disabled:null==I,loading:R,onClick:function(){W(!0),g.A.post("".concat(A.J,"/api/management/order/payment/update_payment_status/"),{payment_num:L.payment_num,action:"REJECTED",comment:I}).then((function(t){W(!1),200===t.status&&(e.setPayment(!0),e.setAddPayment(!1))})).catch((function(e){W(!1),417===e.response.status?B(e.response.data.error,{variant:"error"}):B("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u062b\u0628\u062a"})]})})]})})]})}var te=n(97539),ne=n(6445),ie=n(58926),se=n(32459),re=n(1314),le=n(34200),oe=n(6252),ae=n(67999),de=(0,d.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function xe(e){var t=(0,s.useState)(),n=(0,o.A)(t,2),r=(n[0],n[1],(0,s.useState)(null)),l=(0,o.A)(r,2),d=(l[0],l[1],(0,s.useState)([])),x=(0,o.A)(d,2),p=x[0],u=x[1],f=(0,s.useState)(!1),y=(0,o.A)(f,2),b=(y[0],y[1],(0,s.useState)(null)),w=(0,o.A)(b,2),C=(w[0],w[1],(0,_.useHistory)()),v=(e.state,de(),(0,S.dh)().enqueueSnackbar);return(0,s.useEffect)((function(){g.A.get("".concat(A.J,"/api/management/order/delivery/get_delivery_type/")).then((function(e){200===e.status&&u(e.data)})).catch((function(e){417===e.response.status?v(e.response.data.error,{variant:"error"}):v("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))}),[]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"0px 20px",justifyContent:"space-between",height:"50vh",overflow:"auto",gap:"10px",width:"100%"},children:(0,k.jsxs)(a.A,{children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},onClick:function(){C.goBack()},children:[(0,k.jsx)(Y.A,{color:"#335D8A",width:"15px"}),(0,k.jsx)(m.A,{style:{color:"#335D8A",fontSize:"14px"},children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]}),(0,k.jsx)(ne.l1,{initialValues:{type:"",date:"",comment:"",file:""},validationSchema:ie.Ik().shape({}),onSubmit:function(t,n){n.setErrors;var i=n.setSubmitting;i(!0);var s=new FormData;s.append("order_num",e.order_num),s.append("order_action","Approve"),s.append("state","INCOMPLETE_DELIVERY"===e.state?"Supply_Incomplete":"Delivery"),s.append("sender_date",(0,oe.A)(t.date)),s.append("sender_description",t.comment),s.append("sender_delivery_type",t.type),s.append("BL",t.file),g.A.post("".concat(A.J,"/api/management/order/update_order_state/"),s).then((function(e){200===e.status?(i(!1),C.push("/management/sale/received")):i(!1)})).catch((function(e){i(!1),417===e.response.status?v(e.response.data.error,{variant:"error"}):v("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:function(e){var t=e.errors,n=e.handleBlur,s=e.handleChange,r=e.handleSubmit,l=e.isSubmitting,o=e.touched,d=e.values,x=e.setFieldValue;return(0,k.jsxs)("form",{noValidate:!0,onSubmit:r,style:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0px",width:"100%",height:"100%"},children:[(0,k.jsxs)(a.A,{sx:{mb:"60px"},children:[(0,k.jsx)(m.A,{children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0631\u0633\u0627\u0644 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"}),(0,k.jsxs)(a.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridColumnGap:"20px",gridRowGap:"10px"},children:[(0,k.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,k.jsx)(m.A,{style:{color:"#A7A5A6"},children:"\u0632\u0645\u0627\u0646 \u0627\u0631\u0633\u0627\u0644"}),(0,k.jsx)(se.$,{dateAdapter:re.A,children:(0,k.jsx)(ae.K,{mask:"____/__/__",value:d.date,onChange:function(e){x("date",e)},renderInput:function(e){return(0,k.jsx)(h.A,(0,i.A)((0,i.A)({},e),{},{sx:{background:"#F2F2F2",width:"100%"},placeholder:"\u0632\u0645\u0627\u0646 \u0627\u0631\u0633\u0627\u0644"}))}})})]}),(0,k.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,k.jsx)(m.A,{style:{color:"#A7A5A6"},children:"\u0646\u062d\u0648\u0647 \u06cc \u0627\u0631\u0633\u0627\u0644"}),p.length>0&&(0,k.jsx)(te.A,{disablePortal:!0,fullWidth:!0,options:p,value:p.filter((function(e){return e.name===d.type}))[0],renderInput:function(e){return(0,k.jsx)(h.A,(0,i.A)((0,i.A)({},e),{},{placeholder:"\u0646\u062d\u0648\u0647 \u06cc \u0627\u0631\u0633\u0627\u0644",fullWidth:!0,id:"type",error:Boolean(o.type&&t.type),helperText:o.type&&t.type}))},getOptionLabel:function(e){return e.label},onChange:function(e,t){x("type",t?t.name:"")},sx:{".MuiOutlinedInput-root":{padding:"5px"}},noOptionsText:"\u0645\u0648\u0631\u062f\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f"})]}),(0,k.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,k.jsx)(m.A,{style:{color:"#A7A5A6"},children:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"}),(0,k.jsx)(h.A,{id:"comment","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a",sx:{background:"#F2F2F2",borderRadius:"4px",margin:"3px 3px"},value:d.comment,onChange:s,onBlur:n,multiline:!0,rows:3})]}),(0,k.jsxs)(a.A,{sx:{mt:1,mb:1},children:[(0,k.jsx)(m.A,{style:{color:"#A7A5A6"},children:"\u0628\u0627\u0631\u0646\u0627\u0645\u0647"}),d.file?(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",padding:"20px 10px 5px",gap:"20px",height:"320px",border:"2px dashed #99DDE1",borderRadius:"4px"},children:[(0,k.jsx)("img",{src:URL.createObjectURL(d.file),width:"300px",height:"180px",style:{borderRadius:"8px"}}),(0,k.jsx)(m.A,{style:{color:"#335D8A",fontSize:"11px"},children:d.file.name}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"100%"},children:[(0,k.jsxs)(c.A,{sx:{fontFamily:"IRANSans",fontSize:"12px",fontWeight:400},onClick:function(){x("file","")},children:[(0,k.jsx)("img",{src:G.A,width:"13px",height:"13px"}),"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646"]}),(0,k.jsxs)(c.A,{sx:{fontFamily:"IRANSans",fontSize:"12px",fontWeight:400},component:"label",onChange:function(e){x("file",event.target.files[0])},children:[(0,k.jsx)("img",{src:K.A,width:"13px",height:"20px"}),"\u062a\u063a\u06cc\u06cc\u0631 \u0641\u0627\u06cc\u0644",(0,k.jsx)("input",{type:"file",hidden:!0,multiple:!1})]})]})]}):(0,k.jsxs)(j.A,{disabled:!1,variant:"outlined",component:"label",onChange:function(e){x("file",e.target.files[0])},children:[(0,k.jsx)(le.A,{}),"\u0622\u067e\u0644\u0648\u062f \u0641\u0627\u06cc\u0644",(0,k.jsx)("input",{type:"file",hidden:!0})]})]})]})]}),(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"space-between",gap:2,width:"100%",padding:"10px"},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",onClick:function(){C.goBack()},children:"\u0644\u063a\u0648"}),(0,k.jsx)(j.A,{disabled:l,type:"submit",loading:l,children:"\u0630\u062e\u06cc\u0631\u0647 \u0627\u0637\u0644\u0627\u0639\u0627\u062a "})]})]})}})]})})})}var ce=(0,d.A)((function(e){return{paper:{borderRadius:"20px 20px 0px 0px",zIndex:999,position:"fixed",bottom:0,minHeight:"40%"}}}));function pe(e){var t,n,i,r,l,d;console.log("management props",e);var u=e.data,C=(ce(),(0,s.useState)(!1)),v=(0,o.A)(C,2),D=v[0],I=v[1],W=(0,s.useState)(!1),L=(0,o.A)(W,2),B=L[0],P=L[1],H=(0,s.useState)(null),N=(0,o.A)(H,2),O=N[0],T=N[1],Y=(0,s.useState)(null),q=(0,o.A)(Y,2),G=q[0],K=q[1],Q=(0,s.useState)(!1),Z=(0,o.A)(Q,2),te=Z[0],ne=Z[1],ie=(0,s.useState)(!1),se=(0,o.A)(ie,2),re=se[0],le=se[1],oe=(0,s.useState)(!1),ae=(0,o.A)(oe,2),de=ae[0],pe=ae[1],ue=(0,s.useState)(!1),he=(0,o.A)(ue,2),fe=he[0],ge=he[1],Ae=(0,s.useState)(null),me=(0,o.A)(Ae,2),ye=me[0],je=me[1],be=(0,_.useHistory)(),_e=(0,s.useState)(!1),we=(0,o.A)(_e,2),Ce=we[0],ve=we[1],De=JSON.parse(localStorage.getItem("user")).sale_office_id,Se=(0,S.dh)().enqueueSnackbar;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(a.A,{children:(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",mb:2},children:[(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"10px 15px",gap:"10px",width:"75px",height:"84px",background:"#F4F4F4",borderRadius:"8px"},children:(0,k.jsx)("img",{src:null===u||void 0===u||null===(t=u.user_info)||void 0===t?void 0:t.user_profile_image,style:{width:"44px"}})}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"0px",gap:"12px",width:"100%",height:"70px"},children:[(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"0px",gap:"8px",width:"100%",height:"25px"},children:[(0,k.jsx)(m.A,{style:{fontWeight:500,fontSize:"16px",color:"#00346D",lineHeight:"17px"},children:(null===u||void 0===u||null===(n=u.user_info)||void 0===n?void 0:n.first_name)+" "+(null===u||void 0===u||null===(i=u.user_info)||void 0===i?void 0:i.last_name)}),(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"3px 4px !important",background:"#CCEEF0",borderRadius:"4px",color:"#00AAB5"},children:(0,k.jsx)(m.A,{style:{color:"#00AAB5",fontSize:"12px",textAlign:"center"},children:null===u||void 0===u||null===(r=u.current_state)||void 0===r?void 0:r.label})})]}),(0,k.jsx)(a.A,{sx:(l={display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",padding:"0px",gap:"4px",color:"#335D8A",width:"100%"},(0,x.A)(l,"padding","3px 6px"),(0,x.A)(l,"borderRadius","4px"),l),children:(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"12px",color:"#335D8A",lineHeight:"16px"},children:"\u062b\u0628\u062a: ".concat((0,w.A)(null===u||void 0===u?void 0:u.create_date))})}),"CANCELED"===u.current_state.name&&(0,k.jsx)(a.A,{sx:(d={display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",padding:"0px",gap:"4px",color:"#335D8A",width:"100%"},(0,x.A)(d,"padding","3px 6px"),(0,x.A)(d,"borderRadius","4px"),d),children:(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"12px",color:"#335D8A",lineHeight:"16px"},children:"\u0639\u0644\u062a \u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f: ".concat(null===u||void 0===u?void 0:u.flow_action.comment)})})]})]})}),"WAITING_FOR_PAYMENT_APPROVE"===u.current_state.name&&(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"20px 20px 14px",gap:"10px",background:"#E6EBF0"},children:!1===re&&!1===de?(0,k.jsxs)(a.A,{sx:{width:"100%"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)("img",{src:E.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D"},children:"\u0633\u0641\u0627\u0631\u0634 \u062f\u0647\u0646\u062f\u0647 \u0645\u0628\u0644\u063a ".concat(u.final_price,"  \u0631\u0627 \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646 \u0633\u0641\u0627\u0631\u0634 \u067e\u0631\u062f\u0627\u062e\u062a \u06a9\u0631\u062f\u0647 \u0627\u0633\u062a")})]}),(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%",gap:"6px"},children:(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",height:"32px",background:"#335D8A",borderRadius:"4px","&:hover":{background:"#00346D",color:"white"}},onClick:function(){le(!0)},children:[(0,k.jsx)(m.A,{style:{color:"white",padding:0},children:"\u062a\u0627\u06cc\u06cc\u062f \u067e\u0631\u062f\u0627\u062e\u062a"}),(0,k.jsx)(b.A,{color:"white"})]})})]}):!0===re?(0,k.jsx)(X,{data:u,setPayment:le,setAddPayment:pe,setSelected:je}):(0,k.jsx)(ee,{data:u,setPayment:le,setAddPayment:pe,selected:ye})}),"DELIVERING"===u.current_state.name&&"SALE_OFFICE"===u.supply_by&&(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"20px 20px 14px",gap:"10px",background:"#E6EBF0",borderRadius:"8px"},children:!1===fe?(0,k.jsxs)("div",{style:{width:"100%"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)("img",{src:F.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D"},children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0631\u0633\u0627\u0644 \u0631\u0627 \u0648\u0627\u0631\u062f \u0648 \u0628\u0627\u0631\u0646\u0627\u0645\u0647 \u0631\u0627 \u0636\u0645\u06cc\u0645\u0647 \u06a9\u0646\u06cc\u062f:"})]}),(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%",gap:"6px"},children:(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",height:"32px",background:"#335D8A",borderRadius:"4px","&:hover":{background:"#00346D",color:"white"}},onClick:function(){ge(!0)},children:[(0,k.jsx)(m.A,{style:{color:"white",padding:0},children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0631\u0633\u0627\u0644"}),(0,k.jsx)(b.A,{color:"white"})]})})]}):(0,k.jsx)(xe,{order_num:u.order_num,state:u.current_state.name})}),"PAYMENT_APPROVED"===u.current_state.name&&"SALE_OFFICE"===u.supply_by&&u.supplier_info.user_id===JSON.parse(localStorage.getItem("user")).sale_office_id&&(0,k.jsx)(a.A,{sx:{background:"#E6EBF0",width:"100%",display:"flex",flexDirection:"column"},children:(0,k.jsxs)(a.A,{sx:{width:"100%",padding:"20px 20px"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex",padding:"0px 10px"},children:[(0,k.jsx)("img",{src:E.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D"},children:"\u0648\u0636\u0639\u06cc\u062a \u0645\u0627\u0644\u06cc \u0633\u0641\u0627\u0631\u0634 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f:"})]}),(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",width:"100%",gap:2},children:[(0,k.jsxs)(j.A,{disabled:!1,variant:"outlined",style:{background:"#33BBC4",color:"white",fontWeight:400,fontSize:"12px",lineHeight:"18px",width:"120px"},onClick:function(){I(!0)},type:"button",children:[(0,k.jsx)("img",{src:V.A,style:{marginLeft:"5px"}}),"\u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f"]}),(0,k.jsxs)(j.A,{style:{background:"#00346D",fontWeight:400,fontSize:"12px",lineHeight:"18px",width:"120px"},onClick:function(){ve(!0),g.A.post("".concat(A.J,"/api/management/order/update_order_state/"),{order_num:u.order_num,order_action:"Approve",state:"AGENT_PI"}).then((function(e){ve(!1),200===e.status&&be.push("/management/sale/received")})).catch((function(e){ve(!1),417===e.response.status?Se(e.response.data.error,{variant:"error"}):Se("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:[(0,k.jsx)("img",{src:M.A,style:{marginLeft:"5px"}}),"\u062a\u0627\u06cc\u06cc\u062f \u0633\u0641\u0627\u0631\u0634"]})]})]})}),"PAYMENT_APPROVED"===u.current_state.name&&"SALE_OFFICE"===u.supply_by&&u.supplier_info.user_id!==JSON.parse(localStorage.getItem("user")).sale_office_id&&(0,k.jsx)(a.A,{sx:{background:"#E6EBF0",width:"100%",display:"flex",flexDirection:"column"},children:!0===te?(0,k.jsx)($,{data:u,setAcceptConfirm:ne,PiTag:"AGENT_PI"}):(0,k.jsxs)(a.A,{sx:{width:"100%",padding:"20px 20px"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex",padding:"0px 10px"},children:[(0,k.jsx)("img",{src:E.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D"},children:"\u0648\u0636\u0639\u06cc\u062a \u0645\u0627\u0644\u06cc \u0633\u0641\u0627\u0631\u0634 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f:"})]}),(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",width:"100%",gap:2},children:[(0,k.jsxs)(j.A,{disabled:!1,variant:"outlined",style:{background:"#33BBC4",color:"white",fontWeight:400,fontSize:"12px",lineHeight:"18px",width:"120px"},onClick:function(){I(!0)},type:"button",children:[(0,k.jsx)("img",{src:V.A,style:{marginLeft:"5px"}}),"\u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f"]}),(0,k.jsxs)(j.A,{style:{background:"#00346D",fontWeight:400,fontSize:"12px",lineHeight:"18px",width:"120px"},onClick:function(){ne(!0)},children:[(0,k.jsx)("img",{src:M.A,style:{marginLeft:"5px"}}),"\u062a\u0627\u06cc\u06cc\u062f \u0633\u0641\u0627\u0631\u0634"]})]})]})}),"INCOMPLETE_DELIVERY"===u.current_state.name&&(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"20px 20px 14px",gap:"10px",background:"#E6EBF0",borderRadius:"8px"},children:!1===fe?(0,k.jsxs)("div",{style:{width:"100%"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex"},children:[(0,k.jsx)("img",{src:F.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D",marginBottom:2},children:"\u0644\u06cc\u0633\u062a \u0646\u0627\u0642\u0635\u06cc \u0647\u0627\u06cc \u0633\u0641\u0627\u0631\u0634 \u062f\u0631 \u0632\u06cc\u0631 \u0622\u0648\u0631\u062f\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a\u060c \u0648\u0636\u0639\u06cc\u062a \u0633\u0641\u0627\u0631\u0634 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f:"})]}),(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%",gap:"6px"},children:[(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",height:"32px",borderRadius:"4px",border:"1px solid #F14950"},onClick:function(){I(!0)},children:[(0,k.jsx)("img",{src:y.A}),(0,k.jsx)(m.A,{style:{color:"#F14950",padding:0},children:"\u0631\u062f \u0646\u0627\u0642\u0635\u06cc"})]}),(0,k.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",padding:"6px 8px",height:"32px",background:"#335D8A",borderRadius:"4px","&:hover":{background:"#00346D",color:"white"}},onClick:function(){ge(!0)},children:[(0,k.jsx)(m.A,{style:{color:"white",padding:0},children:"\u062a\u0627\u06cc\u06cc\u062f \u0646\u0627\u0642\u0635\u06cc"}),(0,k.jsx)(b.A,{color:"white"})]})]}),(0,k.jsx)(J,{incomplete:!0,data:u})]}):(0,k.jsx)(xe,{order_num:u.order_num,state:u.current_state.name})}),(0,k.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"20px",justifyContent:"space-between",height:"inherit",backgroundColor:"white"},children:u.flow_info.state_user===De&&"SUBMIT"===u.current_state.name&&(0,k.jsx)(a.A,{sx:{background:"#E6EBF0",width:"100%",display:"flex",flexDirection:"column"},children:!0===te?(0,k.jsx)($,{data:u,setAcceptConfirm:ne,PiTag:"PI"}):(0,k.jsxs)(a.A,{sx:{width:"100%",padding:"20px 20px"},children:[(0,k.jsxs)(a.A,{sx:{display:"inline-flex",padding:"0px 10px"},children:[(0,k.jsx)("img",{src:E.A,style:{marginBottom:"20px",marginLeft:"5px"}}),(0,k.jsx)(m.A,{style:{fontWeight:400,fontSize:"14px",lineHeight:"20px",color:"#00346D"},children:"\u0648\u0636\u0639\u06cc\u062a \u0633\u0641\u0627\u0631\u0634 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f:"})]}),(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",width:"100%",gap:2},children:[(0,k.jsxs)(j.A,{disabled:!1,variant:"outlined",style:{background:"#33BBC4",color:"white",fontWeight:400,fontSize:"12px",lineHeight:"18px",width:"120px"},onClick:function(){I(!0)},type:"button",children:[(0,k.jsx)("img",{src:V.A,style:{marginLeft:"5px"}}),"\u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f"]}),(0,k.jsxs)(j.A,{style:{background:"#00346D",fontWeight:400,fontSize:"12px",lineHeight:"18px",width:"120px"},onClick:function(){ne(!0)},children:[(0,k.jsx)("img",{src:M.A,style:{marginLeft:"5px"}}),"\u062a\u0627\u06cc\u06cc\u062f \u0633\u0641\u0627\u0631\u0634"]})]})]})})}),(0,k.jsx)(U.A,{open:D,handleClose:function(){return I(!1)},title:"\u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f",content:(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",gap:"10px",borderRadius:"8px"},children:[(0,k.jsx)(a.A,{children:(0,k.jsxs)(a.A,{sx:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,k.jsx)(m.A,{style:{fontSize:"14px"},children:"\u0639\u0644\u062a \u0639\u062f\u0645 \u062a\u0627\u06cc\u06cc\u062f \u0633\u0641\u0627\u0631\u0634 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"}),(0,k.jsxs)(a.A,{sx:{mt:1,width:"100%"},children:[(0,k.jsx)(m.A,{style:{color:"#A7A5A6"},children:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"}),(0,k.jsx)(h.A,{id:"name","aria-describedby":"my-helper-text",fullWidth:!0,placeholder:"...\u0628\u0646\u0648\u06cc\u0633\u06cc\u062f",rows:4,multiline:!0,sx:{backgroundColor:"white",borderRadius:"4px",margin:"3px 3px"},value:G,onChange:function(e){return K(e.target.value)}})]})]})}),(0,k.jsx)(p.A,{}),(0,k.jsx)(a.A,{sx:{display:"flex",width:"100%",justifyContent:"flex-end"},children:(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",gap:2},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",style:{width:"150px"},onClick:function(){I(!1)},type:"button",children:"\u0644\u063a\u0648"}),(0,k.jsx)(j.A,{style:{width:"150px"},disabled:null==G,loading:Ce,onClick:function(){ve(!0),g.A.post("".concat(A.J,"/api/management/order/update_order_state/"),{order_num:u.order_num,order_action:"SUBMIT"===u.current_state.name?"Cancel":"Reject",comment:G,state:"INCOMPLETE_DELIVERY"===u.current_state.name?"Reject_Incomplete":"Cancel"}).then((function(e){ve(!1),200===e.status&&be.push("/management/sale/received")})).catch((function(e){ve(!1),417===e.response.status?Se(e.response.data.error,{variant:"error"}):Se("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u062b\u0628\u062a"})]})})]})}),(0,k.jsx)(U.A,{anchor:"bottom",open:B,handleClose:function(){return P(!1)},title:"\u0627\u0631\u0633\u0627\u0644 \u0633\u0641\u0627\u0631\u0634",content:(0,k.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",padding:"16px 20px",justifyContent:"space-between",gap:"10px",borderRadius:"8px"},children:[(0,k.jsx)(a.A,{children:(0,k.jsxs)(a.A,{sx:{display:"flex",gap:"10px",flexDirection:"column"},children:[(0,k.jsx)(m.A,{style:{fontSize:"14px"},children:"\u0627\u0631\u0633\u0627\u0644 \u0633\u0641\u0627\u0631\u0634 \u062a\u0648\u0633\u0637"}),(0,k.jsxs)(f.A,{fullWidth:!0,orientation:"vertical","aria-label":"vertical contained button group",variant:"contained",sx:{gap:2,boxShadow:"none"},id:"input",children:[(0,k.jsxs)(c.A,{sx:{backgroundColor:"#E6EBF0",border:"1px solid #99AEC5",borderRadius:"4px !important",padding:"12px",height:"48px",fontStyle:"normal",fontWeight:400,fontSize:"16px",lineHeight:"24px",color:"#00346D",fontFamily:"IRANSans","&:hover":{color:"#231F20 !important",backgroundColor:"#DFF2F2 !important",fontWeight:600,fontSize:"16px"}},onClick:function(){T("SUPPLIER")},children:[(0,k.jsx)("img",{src:z.A}),"\u062e\u0648\u062f\u0645"]}),(0,k.jsxs)(c.A,{sx:{backgroundColor:"#E6EBF0",border:"1px solid #99AEC5",borderRadius:"4px !important",padding:"12px",height:"48px",fontStyle:"normal",fontWeight:400,fontSize:"16px",lineHeight:"24px",color:"#00346D",fontFamily:"IRANSans","&:hover":{color:"#231F20 !important",backgroundColor:"#DFF2F2 !important",fontWeight:600,fontSize:"16px"}},onClick:function(){T("SALE_OFFICE")},children:[(0,k.jsx)("img",{src:R.A}),"\u062f\u0641\u062a\u0631 \u0641\u0631\u0648\u0634"]})]})]})}),(0,k.jsx)(p.A,{}),(0,k.jsx)(a.A,{sx:{display:"flex",width:"100%",justifyContent:"flex-end"},children:(0,k.jsxs)(a.A,{sx:{display:"inline-flex",justifyContent:"flex-end",gap:2},children:[(0,k.jsx)(j.A,{disabled:!1,variant:"outlined",style:{width:"150px"},onClick:function(){P(!1)},type:"button",children:"\u0644\u063a\u0648"}),(0,k.jsx)(j.A,{style:{width:"150px"},disabled:null==O,loading:Ce,onClick:function(){ve(!0),g.A.post("".concat(A.J,"/api/management/order/set_supplier/"),{order_num:u.order_num,supply_by:O}).then((function(e){ve(!1),200===e.status&&("SUPPLIER"===O?(ge(!0),P(!1)):be.push("/management/sale/received"))})).catch((function(e){ve(!1),417===e.response.status?Se(e.response.data.error,{variant:"error"}):Se("\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f\u0647! \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0633\u0639\u06cc \u06a9\u0646\u06cc\u062f",{variant:"error"})}))},children:"\u062b\u0628\u062a"})]})})]})})]})}function ue(e){var t=(0,s.useState)(e.location.pathname.split("/")[4]),n=(0,o.A)(t,2),r=(n[0],n[1]),l=(0,s.useState)(e.location.state.data),a=(0,o.A)(l,2),d=a[0],x=a[1],c=(0,_.useHistory)();return(0,s.useEffect)((function(){r(e.location.pathname.split("/")[4]),x(e.location.state.data)})),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(H.A,{sx:{display:"flex",flexDirection:"row",width:"100%",padding:"20px"},children:(0,k.jsx)(H.A,{sx:{width:"100%",padding:"40px 40px 30px",backgroundColor:"white",height:"100%"},children:(0,k.jsxs)(P.Ay,{container:!0,spacing:2,children:[(0,k.jsxs)(P.Ay,{item:!0,xs:8,children:[(0,k.jsxs)(H.A,{sx:{display:"inline-flex",cursor:"pointer"},onClick:function(){c.push("/management/sale/received")},children:[(0,k.jsx)(N.A,{color:"#335D8A"}),(0,k.jsx)(m.A,{style:{color:"#335D8A",fontWeight:400,fontSize:"16px"},children:"\u062f\u0631\u06cc\u0627\u0641\u062a\u06cc \u0647\u0627"})]}),(0,k.jsx)(H.A,{children:(0,k.jsx)(pe,(0,i.A)((0,i.A)({},e),{},{data:d}))})]}),(0,k.jsx)(P.Ay,{item:!0,xs:4,children:(0,k.jsx)(J,{data:d})})]})})})})}const he=function(e){var t=(0,r.A)(),n=(0,l.A)(t.breakpoints.down("md"));return(0,k.jsx)(k.Fragment,{children:n?(0,k.jsx)(B,(0,i.A)({},e)):(0,k.jsx)(ue,(0,i.A)({},e))})}}}]);